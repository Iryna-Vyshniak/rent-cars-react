import{R as ve,u as Wt,c as zt,r as G,P as m,j as c,h as Kt,a as Gt,B as ce,g as Jt,p as Qt,b as Xt,d as Yt,T as ft,e as Le,f as Zt,i as es,k as ts,l as _e,m as ss,n as rs,o as is,s as as,q as ns,C as ls,t as D,v as os,w as yt,x as cs,y as us,z as ds}from"./index-113f11e4.js";function ht(e=ve){const i=e===ve?Wt:zt(e);return function(){const{store:s}=i();return s}}const fs=ht();function ys(e=ve){const i=e===ve?fs:ht(e);return function(){return i().dispatch}}const Pe=ys(),mt="/rent-cars-react/assets/car-8d70796c.jpg",hs=(e=10)=>{const[i,t]=G.useState(1),[s]=G.useState(e);return[s,i,()=>t(n=>n+1)]},ms=(e,i)=>{const[t,s]=G.useState([]);return G.useEffect(()=>{if(!i)return;const a=[...new Set(e.map(n=>n[i]))];s(a)},[e,i]),t},Ue=({src:e,alt:i,className:t,blockClass:s,width:a,height:n})=>c.jsx("div",{className:s?`mb-[14px] max-w-full overflow-hidden rounded-[14px] ${s}`:"thumb mb-[14px] max-w-full overflow-hidden rounded-[14px]",children:c.jsx("img",{src:e?`${e}`:mt,alt:i,className:t?`block h-auto max-w-full object-cover object-center ${t}`:"block h-auto max-w-full  object-cover object-center",width:a,height:n,loading:"lazy"})});Ue.propTypes={src:m.string.isRequired,alt:m.string.isRequired,className:m.string,blockClass:m.string,width:m.string.isRequired,height:m.string};const gs=document.getElementById("modal"),gt=({onClose:e,children:i,isOpen:t})=>{G.useEffect(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="visible"},[t]);const s=G.useCallback(a=>{document.body.style.overflow="visible",Kt(a,e)},[e]);return G.useEffect(()=>(document.body.addEventListener("keydown",s),()=>document.body.removeEventListener("keydown",s)),[s]),Gt.createPortal(c.jsx("div",{className:"backdrop",onClick:s,children:c.jsxs("div",{className:"modal max-w-full dark:bg-slate-700",children:[c.jsx(ce,{onClick:e,className:"close",type:"button",iconURL:"#icon-close",ariaLabel:"close icon"}),i]})}),gs)};gt.propTypes={children:m.node.isRequired,onClose:m.func.isRequired,isOpen:m.bool};const ue=()=>c.jsx("span",{className:"vector dark:text-white/50",children:"|"}),le=({conditionText:e,conditionValue:i})=>c.jsxs("li",{className:"modal-btn-cond dark:bg-slate-600",children:[c.jsx("p",{className:"cond dark:text-white/50",children:e}),i&&c.jsx("span",{className:"modal-accent-cond",children:i})]});le.propTypes={conditionText:m.string.isRequired,conditionValue:m.string};const xt=({rentConditions:e,mile:i,price:t,title:s})=>c.jsxs("div",{className:"mb-[24px] ",children:[c.jsxs("p",{className:"modal-second-title dark:text-white",children:[s,":"]}),c.jsxs("ul",{className:"modal-cond-block gap-3",children:[c.jsx(le,{conditionText:e[0],conditionValue:e[1]}),c.jsx(le,{conditionText:e[2]}),c.jsx(le,{conditionText:e[3]}),c.jsx(le,{conditionText:"Mileage: ",conditionValue:i}),c.jsx(le,{conditionText:"Price: ",conditionValue:`${t}$`})]})]});xt.propTypes={rentConditions:m.array.isRequired,mile:m.string.isRequired,price:m.string.isRequired,title:m.string.isRequired};const Oe=({items:e,separator:i})=>c.jsx("ul",{className:"mb-[4px] flex flex-wrap items-center justify-start",children:e.map((t,s)=>c.jsxs("li",{className:"text-description dark:text-white/50",children:[t,s<e.length-1&&i]},s))});Oe.propTypes={items:m.array.isRequired,separator:m.any};const pt=({accessories:e,functionalities:i,title:t})=>c.jsxs("div",{className:"mb-[24px]",children:[c.jsxs("p",{className:"modal-second-title dark:text-white",children:[t,":"]}),c.jsx(Oe,{items:e,separator:c.jsx(ue,{})}),c.jsx(Oe,{items:i,separator:c.jsx(ue,{})})]});pt.propTypes={accessories:m.array.isRequired,functionalities:m.array.isRequired,title:m.string.isRequired};const bt=({car:e})=>{const{year:i,make:t,model:s,img:a,rentalPrice:n,address:d,description:v,accessories:x,functionalities:F,rentalConditions:b,mileage:j}=e,p=Zt(e),A=Jt(d,e),k=Qt(b),P=Xt(j),Y=Yt(n);return c.jsxs(c.Fragment,{children:[c.jsx(Ue,{width:"461",height:"248",src:a,alt:`${t} ${s}`,className:"modal-car",blockClass:"w-[461px] h-[248px]"}),c.jsxs(ft,{className:"modal-title",children:[t," ",c.jsx("span",{className:"modal-accent-title",children:s}),", ",i]}),c.jsxs("div",{className:"mb-[14px] gap-[4px]",children:[c.jsx("ul",{className:"modal-description mb-[4px] flex items-center justify-start",children:Le(A,c.jsx(ue,{}))}),c.jsx("ul",{className:"modal-description flex items-center justify-start",children:Le(p,c.jsx(ue,{}))})]}),c.jsx("div",{className:"modal-accent-descr dark:text-white",children:v}),c.jsx(pt,{title:"Accessories and functionalities",accessories:x,functionalities:F}),c.jsx(xt,{title:"Rental Conditions",rentConditions:k,mile:P,price:Y}),c.jsx("a",{href:"tel:+380730000000",className:"modal-btn-link",children:"Rental car"})]})};bt.propTypes={car:m.shape({id:m.number.isRequired,year:m.number.isRequired,make:m.string.isRequired,model:m.string.isRequired,type:m.string.isRequired,img:m.string.isRequired,description:m.string.isRequired,functionalities:m.array.isRequired,rentalPrice:m.string.isRequired,rentalCompany:m.string.isRequired,address:m.string.isRequired,mileage:m.number.isRequired,accessories:m.array.isRequired,rentalConditions:m.string.isRequired}).isRequired};const xs=e=>e.cars.items,ps=e=>e.cars.favorites,vt=e=>e.cars.filter,_t=({locationData:e,carData:i})=>c.jsxs(c.Fragment,{children:[c.jsx("ul",{className:"card-info-block flex-wrap dark:text-white/50",children:Le(e,c.jsx(ue,{}))}),c.jsx("ul",{className:"card-info-block mb-[28px] dark:text-white/50",children:Object.entries(i).map(([t,s],a,n)=>c.jsxs("li",{className:"text-description dark:text-white/50",children:[es(t,s),a<n.length-1&&c.jsx(ue,{})]},a))})]});_t.propTypes={carData:m.object.isRequired,locationData:m.array.isRequired};const jt=({car:e})=>{const{isOpen:i,open:t,close:s}=ts(!1),a=_e(ps),n=Pe(),{id:d,year:v,make:x,model:F,img:b,rentalPrice:j,address:p}=e,A=rs(e),k=ss(p,e),P=a==null?void 0:a.some(de=>de.id===d),Y=()=>n(P?is(e):as(e));return c.jsx(c.Fragment,{children:c.jsxs("li",{className:"card flex-auto",children:[c.jsx(ce,{type:"button",iconURL:"#icon-heart",ariaLabel:"heart icon",onClick:Y,className:`heart ${P?"favorite":""}`}),c.jsx(Ue,{className:"card-image",src:b||mt,alt:`${x} ${F}`,width:"274",height:"426"}),c.jsxs(ft,{children:[c.jsxs("span",{className:"truncate hover:text-clip dark:text-white",children:[x,c.jsx("span",{className:"title-accent ml-1",children:F}),", ",v]}),c.jsx("span",{className:"dark:text-white",children:j})]}),c.jsx(_t,{locationData:k,carData:A}),c.jsx(ce,{label:"Learn more",className:"card-big-button",onClick:t}),i&&c.jsx(gt,{isOpen:i,onClose:s,children:c.jsx(bt,{car:e})})]})})};jt.propTypes={car:m.shape({id:m.number.isRequired,year:m.number.isRequired,make:m.string.isRequired,model:m.string.isRequired,type:m.string.isRequired,img:m.string.isRequired,description:m.string.isRequired,functionalities:m.array.isRequired,rentalPrice:m.string.isRequired,rentalCompany:m.string.isRequired,address:m.string.isRequired,mileage:m.number.isRequired}).isRequired,fav:m.bool};const Vt=({adverts:e})=>{const[i,t,s]=hs(ls),a=i*t;return c.jsxs(c.Fragment,{children:[c.jsx("ul",{className:"cards-list",children:ns(e,a).map(n=>c.jsx(jt,{car:n},n.id))}),(e==null?void 0:e.length)>=a&&c.jsx(ce,{className:"button-load",label:"Load more",onClick:s})]})};Vt.propTypes={adverts:m.array};var ge=e=>e.type==="checkbox",oe=e=>e instanceof Date,O=e=>e==null;const Ft=e=>typeof e=="object";var E=e=>!O(e)&&!Array.isArray(e)&&Ft(e)&&!oe(e),wt=e=>E(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,bs=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,kt=(e,i)=>e.has(bs(i)),vs=e=>{const i=e.constructor&&e.constructor.prototype;return E(i)&&i.hasOwnProperty("isPrototypeOf")},Be=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $(e){let i;const t=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Be&&(e instanceof Blob||e instanceof FileList))&&(t||E(e)))if(i=t?[]:{},!t&&!vs(e))i=e;else for(const s in e)e.hasOwnProperty(s)&&(i[s]=$(e[s]));else return e;return i}var xe=e=>Array.isArray(e)?e.filter(Boolean):[],q=e=>e===void 0,y=(e,i,t)=>{if(!i||!E(e))return t;const s=xe(i.split(/[,[\].]+?/)).reduce((a,n)=>O(a)?a:a[n],e);return q(s)||s===e?q(e[i])?t:e[i]:s};const je={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},H={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},_s=D.createContext(null),Ie=()=>D.useContext(_s);var Rt=(e,i,t,s=!0)=>{const a={defaultValues:i._defaultValues};for(const n in e)Object.defineProperty(a,n,{get:()=>{const d=n;return i._proxyFormState[d]!==H.all&&(i._proxyFormState[d]=!s||H.all),t&&(t[d]=!0),e[d]}});return a},B=e=>E(e)&&!Object.keys(e).length,At=(e,i,t,s)=>{t(e);const{name:a,...n}=e;return B(n)||Object.keys(n).length>=Object.keys(i).length||Object.keys(n).find(d=>i[d]===(!s||H.all))},pe=e=>Array.isArray(e)?e:[e],Ct=(e,i,t)=>t&&i?e===i||Array.isArray(e)&&e.some(s=>s&&t&&s===i):!e||!i||e===i||pe(e).some(s=>s&&(s.startsWith(i)||i.startsWith(s)));function $e(e){const i=D.useRef(e);i.current=e,D.useEffect(()=>{const t=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function js(e){const i=Ie(),{control:t=i.control,disabled:s,name:a,exact:n}=e||{},[d,v]=D.useState(t._formState),x=D.useRef(!0),F=D.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),b=D.useRef(a);return b.current=a,$e({disabled:s,next:j=>x.current&&Ct(b.current,j.name,n)&&At(j,F.current,t._updateFormState)&&v({...t._formState,...j}),subject:t._subjects.state}),D.useEffect(()=>(x.current=!0,F.current.isValid&&t._updateValid(!0),()=>{x.current=!1}),[t]),Rt(d,t,F.current,!1)}var K=e=>typeof e=="string",Dt=(e,i,t,s,a)=>K(e)?(s&&i.watch.add(e),y(t,e,a)):Array.isArray(e)?e.map(n=>(s&&i.watch.add(n),y(t,n))):(s&&(i.watchAll=!0),t);function Vs(e){const i=Ie(),{control:t=i.control,name:s,defaultValue:a,disabled:n,exact:d}=e||{},v=D.useRef(s);v.current=s,$e({disabled:n,subject:t._subjects.values,next:b=>{Ct(v.current,b.name,d)&&F($(Dt(v.current,t._names,b.values||t._formValues,!1,a)))}});const[x,F]=D.useState(t._getWatch(s,a));return D.useEffect(()=>t._removeUnmounted()),x}var He=e=>/^\w*$/.test(e),St=e=>xe(e.replace(/["|']|\]/g,"").split(/\.|\[/));function R(e,i,t){let s=-1;const a=He(i)?[i]:St(i),n=a.length,d=n-1;for(;++s<n;){const v=a[s];let x=t;if(s!==d){const F=e[v];x=E(F)||Array.isArray(F)?F:isNaN(+a[s+1])?{}:[]}e[v]=x,e=e[v]}return e}function Fs(e){const i=Ie(),{name:t,disabled:s,control:a=i.control,shouldUnregister:n}=e,d=kt(a._names.array,t),v=Vs({control:a,name:t,defaultValue:y(a._formValues,t,y(a._defaultValues,t,e.defaultValue)),exact:!0}),x=js({control:a,name:t}),F=D.useRef(a.register(t,{...e.rules,value:v}));return F.current=a.register(t,e.rules),D.useEffect(()=>{const b=a._options.shouldUnregister||n,j=(p,A)=>{const k=y(a._fields,p);k&&(k._f.mount=A)};if(j(t,!0),b){const p=$(y(a._options.defaultValues,t));R(a._defaultValues,t,p),q(y(a._formValues,t))&&R(a._formValues,t,p)}return()=>{(d?b&&!a._state.action:b)?a.unregister(t):j(t,!1)}},[t,a,d,n]),D.useEffect(()=>{a._updateDisabledField({disabled:s,fields:a._fields,name:t})},[s,t,a]),{field:{name:t,value:v,disabled:s,onChange:D.useCallback(b=>F.current.onChange({target:{value:wt(b),name:t},type:je.CHANGE}),[t]),onBlur:D.useCallback(()=>F.current.onBlur({target:{value:y(a._formValues,t),name:t},type:je.BLUR}),[t,a]),ref:b=>{const j=y(a._fields,t);j&&b&&(j._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:p=>b.setCustomValidity(p),reportValidity:()=>b.reportValidity()})}},formState:x,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(x.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(x.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(x.touchedFields,t)},error:{enumerable:!0,get:()=>y(x.errors,t)}})}}const rt=e=>e.render(Fs(e));var ws=(e,i,t,s,a)=>i?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:a||!0}}:{};const Me=(e,i,t)=>{for(const s of t||Object.keys(e)){const a=y(e,s);if(a){const{_f:n,...d}=a;if(n&&i(n.name)){if(n.ref.focus){n.ref.focus();break}else if(n.refs&&n.refs[0].focus){n.refs[0].focus();break}}else E(d)&&Me(d,i)}}};var it=e=>({isOnSubmit:!e||e===H.onSubmit,isOnBlur:e===H.onBlur,isOnChange:e===H.onChange,isOnAll:e===H.all,isOnTouch:e===H.onTouched}),at=(e,i,t)=>!t&&(i.watchAll||i.watch.has(e)||[...i.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length)))),ks=(e,i,t)=>{const s=xe(y(e,t));return R(s,"root",i[t]),R(e,t,s),e},se=e=>typeof e=="boolean",We=e=>e.type==="file",Z=e=>typeof e=="function",Ve=e=>{if(!Be)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},be=e=>K(e),ze=e=>e.type==="radio",Fe=e=>e instanceof RegExp;const nt={value:!1,isValid:!1},lt={value:!0,isValid:!0};var Nt=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!q(e[0].attributes.value)?q(e[0].value)||e[0].value===""?lt:{value:e[0].value,isValid:!0}:lt:nt}return nt};const ot={isValid:!1,value:null};var qt=e=>Array.isArray(e)?e.reduce((i,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:i,ot):ot;function ct(e,i,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||se(e)&&!e)return{type:t,message:be(e)?e:"",ref:i}}var ne=e=>E(e)&&!Fe(e)?e:{value:e,message:""},ut=async(e,i,t,s,a)=>{const{ref:n,refs:d,required:v,maxLength:x,minLength:F,min:b,max:j,pattern:p,validate:A,name:k,valueAsNumber:P,mount:Y,disabled:de}=e._f,_=y(i,k);if(!Y||de)return{};const I=d?d[0]:n,J=w=>{s&&I.reportValidity&&(I.setCustomValidity(se(w)?"":w||""),I.reportValidity())},T={},fe=ze(n),ie=ge(n),Re=fe||ie,W=(P||We(n))&&q(n.value)&&q(_)||Ve(n)&&n.value===""||_===""||Array.isArray(_)&&!_.length,ee=ws.bind(null,k,t,T),Q=(w,V,S,M=X.maxLength,U=X.minLength)=>{const z=w?V:S;T[k]={type:w?M:U,message:z,ref:n,...ee(w?M:U,z)}};if(a?!Array.isArray(_)||!_.length:v&&(!Re&&(W||O(_))||se(_)&&!_||ie&&!Nt(d).isValid||fe&&!qt(d).isValid)){const{value:w,message:V}=be(v)?{value:!!v,message:v}:ne(v);if(w&&(T[k]={type:X.required,message:V,ref:I,...ee(X.required,V)},!t))return J(V),T}if(!W&&(!O(b)||!O(j))){let w,V;const S=ne(j),M=ne(b);if(!O(_)&&!isNaN(_)){const U=n.valueAsNumber||_&&+_;O(S.value)||(w=U>S.value),O(M.value)||(V=U<M.value)}else{const U=n.valueAsDate||new Date(_),z=he=>new Date(new Date().toDateString()+" "+he),te=n.type=="time",ye=n.type=="week";K(S.value)&&_&&(w=te?z(_)>z(S.value):ye?_>S.value:U>new Date(S.value)),K(M.value)&&_&&(V=te?z(_)<z(M.value):ye?_<M.value:U<new Date(M.value))}if((w||V)&&(Q(!!w,S.message,M.message,X.max,X.min),!t))return J(T[k].message),T}if((x||F)&&!W&&(K(_)||a&&Array.isArray(_))){const w=ne(x),V=ne(F),S=!O(w.value)&&_.length>+w.value,M=!O(V.value)&&_.length<+V.value;if((S||M)&&(Q(S,w.message,V.message),!t))return J(T[k].message),T}if(p&&!W&&K(_)){const{value:w,message:V}=ne(p);if(Fe(w)&&!_.match(w)&&(T[k]={type:X.pattern,message:V,ref:n,...ee(X.pattern,V)},!t))return J(V),T}if(A){if(Z(A)){const w=await A(_,i),V=ct(w,I);if(V&&(T[k]={...V,...ee(X.validate,V.message)},!t))return J(V.message),T}else if(E(A)){let w={};for(const V in A){if(!B(w)&&!t)break;const S=ct(await A[V](_,i),I,V);S&&(w={...S,...ee(V,S.message)},J(S.message),t&&(T[k]=w))}if(!B(w)&&(T[k]={ref:I,...w},!t))return T}}return J(!0),T};function Rs(e,i){const t=i.slice(0,-1).length;let s=0;for(;s<t;)e=q(e)?s++:e[i[s++]];return e}function As(e){for(const i in e)if(e.hasOwnProperty(i)&&!q(e[i]))return!1;return!0}function L(e,i){const t=Array.isArray(i)?i:He(i)?[i]:St(i),s=t.length===1?e:Rs(e,t),a=t.length-1,n=t[a];return s&&delete s[n],a!==0&&(E(s)&&B(s)||Array.isArray(s)&&As(s))&&L(e,t.slice(0,-1)),e}function Ne(){let e=[];return{get observers(){return e},next:a=>{for(const n of e)n.next&&n.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(n=>n!==a)}}),unsubscribe:()=>{e=[]}}}var we=e=>O(e)||!Ft(e);function re(e,i){if(we(e)||we(i))return e===i;if(oe(e)&&oe(i))return e.getTime()===i.getTime();const t=Object.keys(e),s=Object.keys(i);if(t.length!==s.length)return!1;for(const a of t){const n=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const d=i[a];if(oe(n)&&oe(d)||E(n)&&E(d)||Array.isArray(n)&&Array.isArray(d)?!re(n,d):n!==d)return!1}}return!0}var Et=e=>e.type==="select-multiple",Cs=e=>ze(e)||ge(e),qe=e=>Ve(e)&&e.isConnected,Tt=e=>{for(const i in e)if(Z(e[i]))return!0;return!1};function ke(e,i={}){const t=Array.isArray(e);if(E(e)||t)for(const s in e)Array.isArray(e[s])||E(e[s])&&!Tt(e[s])?(i[s]=Array.isArray(e[s])?[]:{},ke(e[s],i[s])):O(e[s])||(i[s]=!0);return i}function Lt(e,i,t){const s=Array.isArray(e);if(E(e)||s)for(const a in e)Array.isArray(e[a])||E(e[a])&&!Tt(e[a])?q(i)||we(t[a])?t[a]=Array.isArray(e[a])?ke(e[a],[]):{...ke(e[a])}:Lt(e[a],O(i)?{}:i[a],t[a]):t[a]=!re(e[a],i[a]);return t}var Ee=(e,i)=>Lt(e,i,ke(i)),Ot=(e,{valueAsNumber:i,valueAsDate:t,setValueAs:s})=>q(e)?e:i?e===""?NaN:e&&+e:t&&K(e)?new Date(e):s?s(e):e;function Te(e){const i=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):i.disabled))return We(i)?i.files:ze(i)?qt(e.refs).value:Et(i)?[...i.selectedOptions].map(({value:t})=>t):ge(i)?Nt(e.refs).value:Ot(q(i.value)?e.ref.value:i.value,e)}var Ds=(e,i,t,s)=>{const a={};for(const n of e){const d=y(i,n);d&&R(a,n,d._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:s}},me=e=>q(e)?e:Fe(e)?e.source:E(e)?Fe(e.value)?e.value.source:e.value:e,Ss=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function dt(e,i,t){const s=y(e,t);if(s||He(t))return{error:s,name:t};const a=t.split(".");for(;a.length;){const n=a.join("."),d=y(i,n),v=y(e,n);if(d&&!Array.isArray(d)&&t!==n)return{name:t};if(v&&v.type)return{name:n,error:v};a.pop()}return{name:t}}var Ns=(e,i,t,s,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(i||e):(t?s.isOnBlur:a.isOnBlur)?!e:(t?s.isOnChange:a.isOnChange)?e:!0,qs=(e,i)=>!xe(y(e,i)).length&&L(e,i);const Es={mode:H.onSubmit,reValidateMode:H.onChange,shouldFocusError:!0};function Ts(e={},i){let t={...Es,...e},s={submitCount:0,isDirty:!1,isLoading:Z(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},a={},n=E(t.defaultValues)||E(t.values)?$(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:$(n),v={action:!1,mount:!1,watch:!1},x={mount:new Set,unMount:new Set,array:new Set,watch:new Set},F,b=0;const j={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={values:Ne(),array:Ne(),state:Ne()},A=e.resetOptions&&e.resetOptions.keepDirtyValues,k=it(t.mode),P=it(t.reValidateMode),Y=t.criteriaMode===H.all,de=r=>l=>{clearTimeout(b),b=setTimeout(r,l)},_=async r=>{if(j.isValid||r){const l=t.resolver?B((await W()).errors):await Q(a,!0);l!==s.isValid&&p.state.next({isValid:l})}},I=r=>j.isValidating&&p.state.next({isValidating:r}),J=(r,l=[],o,h,f=!0,u=!0)=>{if(h&&o){if(v.action=!0,u&&Array.isArray(y(a,r))){const g=o(y(a,r),h.argA,h.argB);f&&R(a,r,g)}if(u&&Array.isArray(y(s.errors,r))){const g=o(y(s.errors,r),h.argA,h.argB);f&&R(s.errors,r,g),qs(s.errors,r)}if(j.touchedFields&&u&&Array.isArray(y(s.touchedFields,r))){const g=o(y(s.touchedFields,r),h.argA,h.argB);f&&R(s.touchedFields,r,g)}j.dirtyFields&&(s.dirtyFields=Ee(n,d)),p.state.next({name:r,isDirty:V(r,l),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else R(d,r,l)},T=(r,l)=>{R(s.errors,r,l),p.state.next({errors:s.errors})},fe=(r,l,o,h)=>{const f=y(a,r);if(f){const u=y(d,r,q(o)?y(n,r):o);q(u)||h&&h.defaultChecked||l?R(d,r,l?u:Te(f._f)):U(r,u),v.mount&&_()}},ie=(r,l,o,h,f)=>{let u=!1,g=!1;const C={name:r};if(!o||h){j.isDirty&&(g=s.isDirty,s.isDirty=C.isDirty=V(),u=g!==C.isDirty);const N=re(y(n,r),l);g=y(s.dirtyFields,r),N?L(s.dirtyFields,r):R(s.dirtyFields,r,!0),C.dirtyFields=s.dirtyFields,u=u||j.dirtyFields&&g!==!N}if(o){const N=y(s.touchedFields,r);N||(R(s.touchedFields,r,o),C.touchedFields=s.touchedFields,u=u||j.touchedFields&&N!==o)}return u&&f&&p.state.next(C),u?C:{}},Re=(r,l,o,h)=>{const f=y(s.errors,r),u=j.isValid&&se(l)&&s.isValid!==l;if(e.delayError&&o?(F=de(()=>T(r,o)),F(e.delayError)):(clearTimeout(b),F=null,o?R(s.errors,r,o):L(s.errors,r)),(o?!re(f,o):f)||!B(h)||u){const g={...h,...u&&se(l)?{isValid:l}:{},errors:s.errors,name:r};s={...s,...g},p.state.next(g)}I(!1)},W=async r=>t.resolver(d,t.context,Ds(r||x.mount,a,t.criteriaMode,t.shouldUseNativeValidation)),ee=async r=>{const{errors:l}=await W(r);if(r)for(const o of r){const h=y(l,o);h?R(s.errors,o,h):L(s.errors,o)}else s.errors=l;return l},Q=async(r,l,o={valid:!0})=>{for(const h in r){const f=r[h];if(f){const{_f:u,...g}=f;if(u){const C=x.array.has(u.name),N=await ut(f,d,Y,t.shouldUseNativeValidation&&!l,C);if(N[u.name]&&(o.valid=!1,l))break;!l&&(y(N,u.name)?C?ks(s.errors,N,u.name):R(s.errors,u.name,N[u.name]):L(s.errors,u.name))}g&&await Q(g,l,o)}}return o.valid},w=()=>{for(const r of x.unMount){const l=y(a,r);l&&(l._f.refs?l._f.refs.every(o=>!qe(o)):!qe(l._f.ref))&&Ae(r)}x.unMount=new Set},V=(r,l)=>(r&&l&&R(d,r,l),!re(Ke(),n)),S=(r,l,o)=>Dt(r,x,{...v.mount?d:q(l)?n:K(r)?{[r]:l}:l},o,l),M=r=>xe(y(v.mount?d:n,r,e.shouldUnregister?y(n,r,[]):[])),U=(r,l,o={})=>{const h=y(a,r);let f=l;if(h){const u=h._f;u&&(!u.disabled&&R(d,r,Ot(l,u)),f=Ve(u.ref)&&O(l)?"":l,Et(u.ref)?[...u.ref.options].forEach(g=>g.selected=f.includes(g.value)):u.refs?ge(u.ref)?u.refs.length>1?u.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(f)?!!f.find(C=>C===g.value):f===g.value)):u.refs[0]&&(u.refs[0].checked=!!f):u.refs.forEach(g=>g.checked=g.value===f):We(u.ref)?u.ref.value="":(u.ref.value=f,u.ref.type||p.values.next({name:r,values:{...d}})))}(o.shouldDirty||o.shouldTouch)&&ie(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&he(r)},z=(r,l,o)=>{for(const h in l){const f=l[h],u=`${r}.${h}`,g=y(a,u);(x.array.has(r)||!we(f)||g&&!g._f)&&!oe(f)?z(u,f,o):U(u,f,o)}},te=(r,l,o={})=>{const h=y(a,r),f=x.array.has(r),u=$(l);R(d,r,u),f?(p.array.next({name:r,values:{...d}}),(j.isDirty||j.dirtyFields)&&o.shouldDirty&&p.state.next({name:r,dirtyFields:Ee(n,d),isDirty:V(r,u)})):h&&!h._f&&!O(u)?z(r,u,o):U(r,u,o),at(r,x)&&p.state.next({...s}),p.values.next({name:r,values:{...d}}),!v.mount&&i()},ye=async r=>{const l=r.target;let o=l.name,h=!0;const f=y(a,o),u=()=>l.type?Te(f._f):wt(r);if(f){let g,C;const N=u(),ae=r.type===je.BLUR||r.type===je.FOCUS_OUT,It=!Ss(f._f)&&!t.resolver&&!y(s.errors,o)&&!f._f.deps||Ns(ae,y(s.touchedFields,o),s.isSubmitted,P,k),De=at(o,x,ae);R(d,o,N),ae?(f._f.onBlur&&f._f.onBlur(r),F&&F(0)):f._f.onChange&&f._f.onChange(r);const Se=ie(o,N,ae,!1),$t=!B(Se)||De;if(!ae&&p.values.next({name:o,type:r.type,values:{...d}}),It)return j.isValid&&_(),$t&&p.state.next({name:o,...De?{}:Se});if(!ae&&De&&p.state.next({...s}),I(!0),t.resolver){const{errors:tt}=await W([o]),Ht=dt(s.errors,a,o),st=dt(tt,a,Ht.name||o);g=st.error,o=st.name,C=B(tt)}else g=(await ut(f,d,Y,t.shouldUseNativeValidation))[o],h=isNaN(N)||N===y(d,o,N),h&&(g?C=!1:j.isValid&&(C=await Q(a,!0)));h&&(f._f.deps&&he(f._f.deps),Re(o,C,g,Se))}},he=async(r,l={})=>{let o,h;const f=pe(r);if(I(!0),t.resolver){const u=await ee(q(r)?r:f);o=B(u),h=r?!f.some(g=>y(u,g)):o}else r?(h=(await Promise.all(f.map(async u=>{const g=y(a,u);return await Q(g&&g._f?{[u]:g}:g)}))).every(Boolean),!(!h&&!s.isValid)&&_()):h=o=await Q(a);return p.state.next({...!K(r)||j.isValid&&o!==s.isValid?{}:{name:r},...t.resolver||!r?{isValid:o}:{},errors:s.errors,isValidating:!1}),l.shouldFocus&&!h&&Me(a,u=>u&&y(s.errors,u),r?f:x.mount),h},Ke=r=>{const l={...n,...v.mount?d:{}};return q(r)?l:K(r)?y(l,r):r.map(o=>y(l,o))},Ge=(r,l)=>({invalid:!!y((l||s).errors,r),isDirty:!!y((l||s).dirtyFields,r),isTouched:!!y((l||s).touchedFields,r),error:y((l||s).errors,r)}),Pt=r=>{r&&pe(r).forEach(l=>L(s.errors,l)),p.state.next({errors:r?s.errors:{}})},Je=(r,l,o)=>{const h=(y(a,r,{_f:{}})._f||{}).ref;R(s.errors,r,{...l,ref:h}),p.state.next({name:r,errors:s.errors,isValid:!1}),o&&o.shouldFocus&&h&&h.focus&&h.focus()},Ut=(r,l)=>Z(r)?p.values.subscribe({next:o=>r(S(void 0,l),o)}):S(r,l,!0),Ae=(r,l={})=>{for(const o of r?pe(r):x.mount)x.mount.delete(o),x.array.delete(o),l.keepValue||(L(a,o),L(d,o)),!l.keepError&&L(s.errors,o),!l.keepDirty&&L(s.dirtyFields,o),!l.keepTouched&&L(s.touchedFields,o),!t.shouldUnregister&&!l.keepDefaultValue&&L(n,o);p.values.next({values:{...d}}),p.state.next({...s,...l.keepDirty?{isDirty:V()}:{}}),!l.keepIsValid&&_()},Qe=({disabled:r,name:l,field:o,fields:h})=>{if(se(r)){const f=r?void 0:y(d,l,Te(o?o._f:y(h,l)._f));R(d,l,f),ie(l,f,!1,!1,!0)}},Ce=(r,l={})=>{let o=y(a,r);const h=se(l.disabled);return R(a,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...l}}),x.mount.add(r),o?Qe({field:o,disabled:l.disabled,name:r}):fe(r,!0,l.value),{...h?{disabled:l.disabled}:{},...t.progressive?{required:!!l.required,min:me(l.min),max:me(l.max),minLength:me(l.minLength),maxLength:me(l.maxLength),pattern:me(l.pattern)}:{},name:r,onChange:ye,onBlur:ye,ref:f=>{if(f){Ce(r,l),o=y(a,r);const u=q(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,g=Cs(u),C=o._f.refs||[];if(g?C.find(N=>N===u):u===o._f.ref)return;R(a,r,{_f:{...o._f,...g?{refs:[...C.filter(qe),u,...Array.isArray(y(n,r))?[{}]:[]],ref:{type:u.type,name:r}}:{ref:u}}}),fe(r,!1,void 0,u)}else o=y(a,r,{}),o._f&&(o._f.mount=!1),(t.shouldUnregister||l.shouldUnregister)&&!(kt(x.array,r)&&v.action)&&x.unMount.add(r)}}},Xe=()=>t.shouldFocusError&&Me(a,r=>r&&y(s.errors,r),x.mount),Ye=(r,l)=>async o=>{o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let h=$(d);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:u}=await W();s.errors=f,h=u}else await Q(a);L(s.errors,"root"),B(s.errors)?(p.state.next({errors:{}}),await r(h,o)):(l&&await l({...s.errors},o),Xe(),setTimeout(Xe)),p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(s.errors),submitCount:s.submitCount+1,errors:s.errors})},Bt=(r,l={})=>{y(a,r)&&(q(l.defaultValue)?te(r,y(n,r)):(te(r,l.defaultValue),R(n,r,l.defaultValue)),l.keepTouched||L(s.touchedFields,r),l.keepDirty||(L(s.dirtyFields,r),s.isDirty=l.defaultValue?V(r,y(n,r)):V()),l.keepError||(L(s.errors,r),j.isValid&&_()),p.state.next({...s}))},Ze=(r,l={})=>{const o=r?$(r):n,h=$(o),f=r&&!B(r)?h:n;if(l.keepDefaultValues||(n=o),!l.keepValues){if(l.keepDirtyValues||A)for(const u of x.mount)y(s.dirtyFields,u)?R(f,u,y(d,u)):te(u,y(f,u));else{if(Be&&q(r))for(const u of x.mount){const g=y(a,u);if(g&&g._f){const C=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;if(Ve(C)){const N=C.closest("form");if(N){N.reset();break}}}}a={}}d=e.shouldUnregister?l.keepDefaultValues?$(n):{}:$(f),p.array.next({values:{...f}}),p.values.next({values:{...f}})}x={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!v.mount&&i(),v.mount=!j.isValid||!!l.keepIsValid,v.watch=!!e.shouldUnregister,p.state.next({submitCount:l.keepSubmitCount?s.submitCount:0,isDirty:l.keepDirty?s.isDirty:!!(l.keepDefaultValues&&!re(r,n)),isSubmitted:l.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:l.keepDirtyValues?s.dirtyFields:l.keepDefaultValues&&r?Ee(n,r):{},touchedFields:l.keepTouched?s.touchedFields:{},errors:l.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},et=(r,l)=>Ze(Z(r)?r(d):r,l);return{control:{register:Ce,unregister:Ae,getFieldState:Ge,handleSubmit:Ye,setError:Je,_executeSchema:W,_getWatch:S,_getDirty:V,_updateValid:_,_removeUnmounted:w,_updateFieldArray:J,_updateDisabledField:Qe,_getFieldArray:M,_reset:Ze,_resetDefaultValues:()=>Z(t.defaultValues)&&t.defaultValues().then(r=>{et(r,t.resetOptions),p.state.next({isLoading:!1})}),_updateFormState:r=>{s={...s,...r}},_subjects:p,_proxyFormState:j,get _fields(){return a},get _formValues(){return d},get _state(){return v},set _state(r){v=r},get _defaultValues(){return n},get _names(){return x},set _names(r){x=r},get _formState(){return s},set _formState(r){s=r},get _options(){return t},set _options(r){t={...t,...r}}},trigger:he,register:Ce,handleSubmit:Ye,watch:Ut,setValue:te,getValues:Ke,reset:et,resetField:Bt,clearErrors:Pt,unregister:Ae,setError:Je,setFocus:(r,l={})=>{const o=y(a,r),h=o&&o._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),l.shouldSelect&&f.select())}},getFieldState:Ge}}function Ls(e={}){const i=D.useRef(),t=D.useRef(),[s,a]=D.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...Ts(e,()=>a(d=>({...d}))),formState:s});const n=i.current.control;return n._options=e,$e({subject:n._subjects.state,next:d=>{At(d,n._proxyFormState,n._updateFormState,!0)&&a({...n._formState})}}),D.useEffect(()=>{e.values&&!re(e.values,t.current)?(n._reset(e.values,n._options.resetOptions),t.current=e.values):n._resetDefaultValues()},[e.values,n]),D.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),i.current.formState=Rt(s,n),i.current}const Mt=({cars:e})=>{const i=_e(vt),t=Pe(),s=os(e),a=ms(e,"make"),n=(e==null?void 0:e.length)===0,{register:d,handleSubmit:v,control:x,reset:F,formState:{errors:b}}=Ls({mode:"onChange",shouldDisable:n});G.useEffect(()=>{F(i)},[i,F]);const j=A=>{t(yt(A))},p=()=>{t(cs()),F({brand:"",price:"",from:"",to:""})};return c.jsx("form",{onSubmit:v(j),className:`form flex-wrap ${n?"pointer-events-none opacity-60":""}`,disabled:n,children:c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{className:"form mb-2 flex-wrap gap-3",children:[c.jsxs("div",{className:"select-wrapper mb-2 gap-3",children:[c.jsx("label",{htmlFor:"brand",className:"select-label",children:"Car brand"}),c.jsx(rt,{name:"brand",control:x,rules:{required:!0,message:"Brand is required"},render:({field:A})=>c.jsxs(c.Fragment,{children:[c.jsxs("select",{...A,className:"select-brand",children:[c.jsx("option",{value:"",className:"select-placeholder",children:"Enter the text"}),a&&a.map((k,P)=>c.jsx("option",{value:k,className:"select-text",children:k},P))]}),b.brand&&c.jsx("p",{className:`error ${n?"opacity-0":"opacity-100"}`,children:b.brand.type==="required"?"Brand is required":b.brand.message})]})})]}),c.jsxs("div",{className:"select-wrapper mb-2",children:[c.jsx("label",{htmlFor:"price",className:"select-label",children:"Price/ 1 hour"}),c.jsx("div",{children:c.jsx(rt,{name:"price",control:x,rules:{required:!0,min:{value:0,message:"Must be 0 or greater"}},render:({field:A})=>c.jsxs(c.Fragment,{children:[c.jsxs("select",{...A,className:"select-price",children:[c.jsx("option",{value:"",className:"select-placeholder",children:"To $"}),s&&s.map((k,P)=>c.jsx("option",{value:k,className:"select-text",children:k},P))]}),b.price&&c.jsx("p",{className:`error ${n?"opacity-0":"opacity-100"}`,children:b.price.type==="required"?"Price is required":b.price.message})]})})})]}),c.jsxs("div",{className:"select-wrapper mb-2",children:[c.jsx("label",{htmlFor:"minMileage",className:"select-label",children:"Car mileage / km (from)"}),c.jsxs("div",{className:"flex",children:[c.jsx("input",{type:"number",placeholder:"From",className:"select-placeholder select-from",...d("from",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"}})}),c.jsx("input",{type:"number",placeholder:"To",className:"select-placeholder select-to",...d("to",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"},validate:(A,{from:k})=>parseInt(A)>parseInt(k)?!0:"To must be greater than From"})}),c.jsxs("p",{className:`error flex items-center justify-between gap-1 ${n?"opacity-0":"opacity-100"}`,children:[(b==null?void 0:b.from)&&c.jsx("span",{children:b.from.message}),(b==null?void 0:b.to)&&c.jsx("span",{children:b.to.message})]})]})]})]}),c.jsxs("div",{className:"-mt-3 mb-2 flex flex-wrap items-center justify-center gap-3",children:[c.jsx(ce,{type:"submit",className:"button-search",label:"Search"}),c.jsx(ce,{type:"button",className:"button-search",onClick:p,label:"Reset"})]})]})})};Mt.propTypes={cars:m.array.isRequired};const Bs=()=>{const e=Pe(),i=_e(xs),t=_e(vt),s=us(i,t);return G.useEffect(()=>{e(ds())},[e]),G.useEffect(()=>{e(yt(null))},[e]),c.jsxs(c.Fragment,{children:[c.jsx(Mt,{cars:s}),(i==null?void 0:i.length)>0&&c.jsx(Vt,{adverts:s})]})};export{Bs as default};
