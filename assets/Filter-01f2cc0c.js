import{k as ve,l as Bt,m as Pt,r as oe,P as g,j as u,n as It,o as $t,B as me,p as Ht,q as Wt,t as zt,v as Gt,T as ct,w as Te,x as Kt,y as Jt,i as Qt,u as dt,z as Xt,A as Yt,D as Zt,E as es,R as D,F as ts,G as ss,s as rs,H as is}from"./index-d9fc6247.js";function ft(e=ve){const i=e===ve?Bt:Pt(e);return function(){const{store:s}=i();return s}}const as=ft();function ns(e=ve){const i=e===ve?as:ft(e);return function(){return i().dispatch}}const yt=ns(),ht="/rent-cars-react/assets/car-8d70796c.jpg",ls=(e,i)=>{const[t,s]=oe.useState([]);return oe.useEffect(()=>{if(!i)return;const a=[...new Set(e.map(l=>l[i]))];s(a)},[e,i]),t},Me=({src:e,alt:i,className:t,blockClass:s,width:a,height:l})=>u.jsx("div",{className:s?`mb-[14px] max-w-full overflow-hidden rounded-[14px] ${s}`:"thumb mb-[14px] max-w-full overflow-hidden rounded-[14px]",children:u.jsx("img",{src:e?`${e}`:ht,alt:i,className:t?`block h-auto max-w-full object-cover object-center ${t}`:"block h-auto max-w-full  object-cover object-center",width:a,height:l,loading:"lazy"})});Me.propTypes={src:g.string.isRequired,alt:g.string.isRequired,className:g.string,blockClass:g.string,width:g.string.isRequired,height:g.string};const os=document.getElementById("modal"),mt=({onClose:e,children:i,isOpen:t})=>{oe.useEffect(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="visible"},[t]);const s=oe.useCallback(a=>{document.body.style.overflow="visible",It(a,e)},[e]);return oe.useEffect(()=>(document.body.addEventListener("keydown",s),()=>document.body.removeEventListener("keydown",s)),[s]),$t.createPortal(u.jsx("div",{className:"backdrop",onClick:s,children:u.jsxs("div",{className:"modal max-w-full dark:bg-slate-700",children:[u.jsx(me,{onClick:e,className:"close",type:"button",iconURL:"#icon-close",ariaLabel:"close icon"}),i]})}),os)};mt.propTypes={children:g.node.isRequired,onClose:g.func.isRequired,isOpen:g.bool};const ue=()=>u.jsx("span",{className:"vector dark:text-white/50",children:"|"}),ne=({conditionText:e,conditionValue:i})=>u.jsxs("li",{className:"modal-btn-cond dark:bg-slate-600",children:[u.jsx("p",{className:"cond dark:text-white/50",children:e}),i&&u.jsx("span",{className:"modal-accent-cond",children:i})]});ne.propTypes={conditionText:g.string.isRequired,conditionValue:g.string};const gt=({rentConditions:e,mile:i,price:t,title:s})=>u.jsxs("div",{className:"mb-[24px] ",children:[u.jsxs("p",{className:"modal-second-title dark:text-white",children:[s,":"]}),u.jsxs("ul",{className:"modal-cond-block gap-3",children:[u.jsx(ne,{conditionText:e[0],conditionValue:e[1]}),u.jsx(ne,{conditionText:e[2]}),u.jsx(ne,{conditionText:e[3]}),u.jsx(ne,{conditionText:"Mileage: ",conditionValue:i}),u.jsx(ne,{conditionText:"Price: ",conditionValue:`${t}$`})]})]});gt.propTypes={rentConditions:g.array.isRequired,mile:g.string.isRequired,price:g.string.isRequired,title:g.string.isRequired};const Le=({items:e,separator:i})=>u.jsx("ul",{className:"mb-[4px] flex flex-wrap items-center justify-start",children:e.map((t,s)=>u.jsxs("li",{className:"text-description dark:text-white/50",children:[t,s<e.length-1&&i]},s))});Le.propTypes={items:g.array.isRequired,separator:g.any};const xt=({accessories:e,functionalities:i,title:t})=>u.jsxs("div",{className:"mb-[24px]",children:[u.jsxs("p",{className:"modal-second-title dark:text-white",children:[t,":"]}),u.jsx(Le,{items:e,separator:u.jsx(ue,{})}),u.jsx(Le,{items:i,separator:u.jsx(ue,{})})]});xt.propTypes={accessories:g.array.isRequired,functionalities:g.array.isRequired,title:g.string.isRequired};const pt=({car:e})=>{const{year:i,make:t,model:s,img:a,rentalPrice:l,address:d,description:v,accessories:p,functionalities:w,rentalConditions:F,mileage:x}=e,b=Kt(e),L=Ht(d,e),k=Wt(F),O=zt(x),B=Gt(l);return u.jsxs(u.Fragment,{children:[u.jsx(Me,{width:"461",height:"248",src:a,alt:`${t} ${s}`,className:"modal-car",blockClass:"w-[461px] h-[248px]",loading:"lazy"}),u.jsxs(ct,{className:"modal-title",children:[t," ",u.jsx("span",{className:"modal-accent-title",children:s}),", ",i]}),u.jsxs("div",{className:"mb-[14px] gap-[4px]",children:[u.jsx("ul",{className:"modal-description mb-[4px] flex items-center justify-start",children:Te(L,u.jsx(ue,{}))}),u.jsx("ul",{className:"modal-description flex items-center justify-start",children:Te(b,u.jsx(ue,{}))})]}),u.jsx("div",{className:"modal-accent-descr dark:text-white",children:v}),u.jsx(xt,{title:"Accessories and functionalities",accessories:p,functionalities:w}),u.jsx(gt,{title:"Rental Conditions",rentConditions:k,mile:O,price:B}),u.jsx("a",{href:"tel:+380730000000",className:"modal-btn-link",children:"Rental car"})]})};pt.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired,accessories:g.array.isRequired,rentalConditions:g.string.isRequired}).isRequired};const Ts=e=>e.cars.items,us=e=>e.cars.favorites,cs=e=>e.cars.filter,bt=({locationData:e,carData:i})=>u.jsxs(u.Fragment,{children:[u.jsx("ul",{className:"card-info-block flex-wrap dark:text-white/50",children:Te(e,u.jsx(ue,{}))}),u.jsx("ul",{className:"card-info-block mb-[28px] dark:text-white/50",children:Object.entries(i).map(([t,s],a,l)=>u.jsxs("li",{className:"text-description dark:text-white/50",children:[Jt(t,s),a<l.length-1&&u.jsx(ue,{})]},a))})]});bt.propTypes={carData:g.object.isRequired,locationData:g.array.isRequired};const ds=({car:e})=>{const{isOpen:i,open:t,close:s}=Qt(!1),a=dt(us),l=yt(),{id:d,year:v,make:p,model:w,img:F,rentalPrice:x,address:b}=e,L=Yt(e),k=Xt(b,e),O=a==null?void 0:a.some(ce=>ce.id===d),B=()=>l(O?Zt(e):es(e));return u.jsx(u.Fragment,{children:u.jsxs("li",{className:"card flex-auto",children:[u.jsx(me,{type:"button",iconURL:"#icon-heart",ariaLabel:"heart icon",onClick:B,className:`heart ${O?"favorite":""}`}),u.jsx(Me,{className:"card-image",src:F||ht,alt:`${p} ${w}`,width:"274",height:"426",loading:"lazy"}),u.jsxs(ct,{children:[u.jsxs("span",{className:"truncate hover:text-clip dark:text-white",children:[p,u.jsx("span",{className:"title-accent ml-1",children:w}),", ",v]}),u.jsx("span",{className:"dark:text-white",children:x})]}),u.jsx(bt,{locationData:k,carData:L}),u.jsx(me,{label:"Learn more",className:"card-big-button",onClick:t}),i&&u.jsx(mt,{isOpen:i,onClose:s,children:u.jsx(pt,{car:e})})]})})};ds.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired}).isRequired,fav:g.bool};var ge=e=>e.type==="checkbox",le=e=>e instanceof Date,M=e=>e==null;const vt=e=>typeof e=="object";var N=e=>!M(e)&&!Array.isArray(e)&&vt(e)&&!le(e),_t=e=>N(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,fs=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Vt=(e,i)=>e.has(fs(i)),ys=e=>{const i=e.constructor&&e.constructor.prototype;return N(i)&&i.hasOwnProperty("isPrototypeOf")},Ue=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function H(e){let i;const t=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Ue&&(e instanceof Blob||e instanceof FileList))&&(t||N(e)))if(i=t?[]:{},!t&&!ys(e))i=e;else for(const s in e)e.hasOwnProperty(s)&&(i[s]=H(e[s]));else return e;return i}var xe=e=>Array.isArray(e)?e.filter(Boolean):[],q=e=>e===void 0,y=(e,i,t)=>{if(!i||!N(e))return t;const s=xe(i.split(/[,[\].]+?/)).reduce((a,l)=>M(a)?a:a[l],e);return q(s)||s===e?q(e[i])?t:e[i]:s};const _e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},hs=D.createContext(null),Be=()=>D.useContext(hs);var Ft=(e,i,t,s=!0)=>{const a={defaultValues:i._defaultValues};for(const l in e)Object.defineProperty(a,l,{get:()=>{const d=l;return i._proxyFormState[d]!==W.all&&(i._proxyFormState[d]=!s||W.all),t&&(t[d]=!0),e[d]}});return a},I=e=>N(e)&&!Object.keys(e).length,wt=(e,i,t,s)=>{t(e);const{name:a,...l}=e;return I(l)||Object.keys(l).length>=Object.keys(i).length||Object.keys(l).find(d=>i[d]===(!s||W.all))},pe=e=>Array.isArray(e)?e:[e],jt=(e,i,t)=>t&&i?e===i||Array.isArray(e)&&e.some(s=>s&&t&&s===i):!e||!i||e===i||pe(e).some(s=>s&&(s.startsWith(i)||i.startsWith(s)));function Pe(e){const i=D.useRef(e);i.current=e,D.useEffect(()=>{const t=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function ms(e){const i=Be(),{control:t=i.control,disabled:s,name:a,exact:l}=e||{},[d,v]=D.useState(t._formState),p=D.useRef(!0),w=D.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),F=D.useRef(a);return F.current=a,Pe({disabled:s,next:x=>p.current&&jt(F.current,x.name,l)&&wt(x,w.current,t._updateFormState)&&v({...t._formState,...x}),subject:t._subjects.state}),D.useEffect(()=>(p.current=!0,w.current.isValid&&t._updateValid(!0),()=>{p.current=!1}),[t]),Ft(d,t,w.current,!1)}var K=e=>typeof e=="string",kt=(e,i,t,s,a)=>K(e)?(s&&i.watch.add(e),y(t,e,a)):Array.isArray(e)?e.map(l=>(s&&i.watch.add(l),y(t,l))):(s&&(i.watchAll=!0),t);function gs(e){const i=Be(),{control:t=i.control,name:s,defaultValue:a,disabled:l,exact:d}=e||{},v=D.useRef(s);v.current=s,Pe({disabled:l,subject:t._subjects.values,next:F=>{jt(v.current,F.name,d)&&w(H(kt(v.current,t._names,F.values||t._formValues,!1,a)))}});const[p,w]=D.useState(t._getWatch(s,a));return D.useEffect(()=>t._removeUnmounted()),p}var Ie=e=>/^\w*$/.test(e),Rt=e=>xe(e.replace(/["|']|\]/g,"").split(/\.|\[/));function R(e,i,t){let s=-1;const a=Ie(i)?[i]:Rt(i),l=a.length,d=l-1;for(;++s<l;){const v=a[s];let p=t;if(s!==d){const w=e[v];p=N(w)||Array.isArray(w)?w:isNaN(+a[s+1])?{}:[]}e[v]=p,e=e[v]}return e}function xs(e){const i=Be(),{name:t,disabled:s,control:a=i.control,shouldUnregister:l}=e,d=Vt(a._names.array,t),v=gs({control:a,name:t,defaultValue:y(a._formValues,t,y(a._defaultValues,t,e.defaultValue)),exact:!0}),p=ms({control:a,name:t}),w=D.useRef(a.register(t,{...e.rules,value:v}));return w.current=a.register(t,e.rules),D.useEffect(()=>{const F=a._options.shouldUnregister||l,x=(b,L)=>{const k=y(a._fields,b);k&&(k._f.mount=L)};if(x(t,!0),F){const b=H(y(a._options.defaultValues,t));R(a._defaultValues,t,b),q(y(a._formValues,t))&&R(a._formValues,t,b)}return()=>{(d?F&&!a._state.action:F)?a.unregister(t):x(t,!1)}},[t,a,d,l]),D.useEffect(()=>{a._updateDisabledField({disabled:s,fields:a._fields,name:t})},[s,t,a]),{field:{name:t,value:v,disabled:s,onChange:D.useCallback(F=>w.current.onChange({target:{value:_t(F),name:t},type:_e.CHANGE}),[t]),onBlur:D.useCallback(()=>w.current.onBlur({target:{value:y(a._formValues,t),name:t},type:_e.BLUR}),[t,a]),ref:F=>{const x=y(a._fields,t);x&&F&&(x._f.ref={focus:()=>F.focus(),select:()=>F.select(),setCustomValidity:b=>F.setCustomValidity(b),reportValidity:()=>F.reportValidity()})}},formState:p,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(p.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(p.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(p.touchedFields,t)},error:{enumerable:!0,get:()=>y(p.errors,t)}})}}const tt=e=>e.render(xs(e));var ps=(e,i,t,s,a)=>i?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:a||!0}}:{};const Oe=(e,i,t)=>{for(const s of t||Object.keys(e)){const a=y(e,s);if(a){const{_f:l,...d}=a;if(l&&i(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else N(d)&&Oe(d,i)}}};var st=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched}),rt=(e,i,t)=>!t&&(i.watchAll||i.watch.has(e)||[...i.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length)))),bs=(e,i,t)=>{const s=xe(y(e,t));return R(s,"root",i[t]),R(e,t,s),e},te=e=>typeof e=="boolean",$e=e=>e.type==="file",Y=e=>typeof e=="function",Ve=e=>{if(!Ue)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},be=e=>K(e),He=e=>e.type==="radio",Fe=e=>e instanceof RegExp;const it={value:!1,isValid:!1},at={value:!0,isValid:!0};var At=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!q(e[0].attributes.value)?q(e[0].value)||e[0].value===""?at:{value:e[0].value,isValid:!0}:at:it}return it};const nt={isValid:!1,value:null};var Dt=e=>Array.isArray(e)?e.reduce((i,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:i,nt):nt;function lt(e,i,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||te(e)&&!e)return{type:t,message:be(e)?e:"",ref:i}}var ae=e=>N(e)&&!Fe(e)?e:{value:e,message:""},ot=async(e,i,t,s,a)=>{const{ref:l,refs:d,required:v,maxLength:p,minLength:w,min:F,max:x,pattern:b,validate:L,name:k,valueAsNumber:O,mount:B,disabled:ce}=e._f,_=y(i,k);if(!B||ce)return{};const $=d?d[0]:l,J=j=>{s&&$.reportValidity&&($.setCustomValidity(te(j)?"":j||""),$.reportValidity())},E={},de=He(l),re=ge(l),ke=de||re,z=(O||$e(l))&&q(l.value)&&q(_)||Ve(l)&&l.value===""||_===""||Array.isArray(_)&&!_.length,Z=ps.bind(null,k,t,E),Q=(j,V,S,U=X.maxLength,P=X.minLength)=>{const G=j?V:S;E[k]={type:j?U:P,message:G,ref:l,...Z(j?U:P,G)}};if(a?!Array.isArray(_)||!_.length:v&&(!ke&&(z||M(_))||te(_)&&!_||re&&!At(d).isValid||de&&!Dt(d).isValid)){const{value:j,message:V}=be(v)?{value:!!v,message:v}:ae(v);if(j&&(E[k]={type:X.required,message:V,ref:$,...Z(X.required,V)},!t))return J(V),E}if(!z&&(!M(F)||!M(x))){let j,V;const S=ae(x),U=ae(F);if(!M(_)&&!isNaN(_)){const P=l.valueAsNumber||_&&+_;M(S.value)||(j=P>S.value),M(U.value)||(V=P<U.value)}else{const P=l.valueAsDate||new Date(_),G=ye=>new Date(new Date().toDateString()+" "+ye),ee=l.type=="time",fe=l.type=="week";K(S.value)&&_&&(j=ee?G(_)>G(S.value):fe?_>S.value:P>new Date(S.value)),K(U.value)&&_&&(V=ee?G(_)<G(U.value):fe?_<U.value:P<new Date(U.value))}if((j||V)&&(Q(!!j,S.message,U.message,X.max,X.min),!t))return J(E[k].message),E}if((p||w)&&!z&&(K(_)||a&&Array.isArray(_))){const j=ae(p),V=ae(w),S=!M(j.value)&&_.length>+j.value,U=!M(V.value)&&_.length<+V.value;if((S||U)&&(Q(S,j.message,V.message),!t))return J(E[k].message),E}if(b&&!z&&K(_)){const{value:j,message:V}=ae(b);if(Fe(j)&&!_.match(j)&&(E[k]={type:X.pattern,message:V,ref:l,...Z(X.pattern,V)},!t))return J(V),E}if(L){if(Y(L)){const j=await L(_,i),V=lt(j,$);if(V&&(E[k]={...V,...Z(X.validate,V.message)},!t))return J(V.message),E}else if(N(L)){let j={};for(const V in L){if(!I(j)&&!t)break;const S=lt(await L[V](_,i),$,V);S&&(j={...S,...Z(V,S.message)},J(S.message),t&&(E[k]=j))}if(!I(j)&&(E[k]={ref:$,...j},!t))return E}}return J(!0),E};function vs(e,i){const t=i.slice(0,-1).length;let s=0;for(;s<t;)e=q(e)?s++:e[i[s++]];return e}function _s(e){for(const i in e)if(e.hasOwnProperty(i)&&!q(e[i]))return!1;return!0}function T(e,i){const t=Array.isArray(i)?i:Ie(i)?[i]:Rt(i),s=t.length===1?e:vs(e,t),a=t.length-1,l=t[a];return s&&delete s[l],a!==0&&(N(s)&&I(s)||Array.isArray(s)&&_s(s))&&T(e,t.slice(0,-1)),e}function Ce(){let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next&&l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}}var we=e=>M(e)||!vt(e);function se(e,i){if(we(e)||we(i))return e===i;if(le(e)&&le(i))return e.getTime()===i.getTime();const t=Object.keys(e),s=Object.keys(i);if(t.length!==s.length)return!1;for(const a of t){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const d=i[a];if(le(l)&&le(d)||N(l)&&N(d)||Array.isArray(l)&&Array.isArray(d)?!se(l,d):l!==d)return!1}}return!0}var St=e=>e.type==="select-multiple",Vs=e=>He(e)||ge(e),qe=e=>Ve(e)&&e.isConnected,Ct=e=>{for(const i in e)if(Y(e[i]))return!0;return!1};function je(e,i={}){const t=Array.isArray(e);if(N(e)||t)for(const s in e)Array.isArray(e[s])||N(e[s])&&!Ct(e[s])?(i[s]=Array.isArray(e[s])?[]:{},je(e[s],i[s])):M(e[s])||(i[s]=!0);return i}function qt(e,i,t){const s=Array.isArray(e);if(N(e)||s)for(const a in e)Array.isArray(e[a])||N(e[a])&&!Ct(e[a])?q(i)||we(t[a])?t[a]=Array.isArray(e[a])?je(e[a],[]):{...je(e[a])}:qt(e[a],M(i)?{}:i[a],t[a]):t[a]=!se(e[a],i[a]);return t}var Ne=(e,i)=>qt(e,i,je(i)),Nt=(e,{valueAsNumber:i,valueAsDate:t,setValueAs:s})=>q(e)?e:i?e===""?NaN:e&&+e:t&&K(e)?new Date(e):s?s(e):e;function Ee(e){const i=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):i.disabled))return $e(i)?i.files:He(i)?Dt(e.refs).value:St(i)?[...i.selectedOptions].map(({value:t})=>t):ge(i)?At(e.refs).value:Nt(q(i.value)?e.ref.value:i.value,e)}var Fs=(e,i,t,s)=>{const a={};for(const l of e){const d=y(i,l);d&&R(a,l,d._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:s}},he=e=>q(e)?e:Fe(e)?e.source:N(e)?Fe(e.value)?e.value.source:e.value:e,ws=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ut(e,i,t){const s=y(e,t);if(s||Ie(t))return{error:s,name:t};const a=t.split(".");for(;a.length;){const l=a.join("."),d=y(i,l),v=y(e,l);if(d&&!Array.isArray(d)&&t!==l)return{name:t};if(v&&v.type)return{name:l,error:v};a.pop()}return{name:t}}var js=(e,i,t,s,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(i||e):(t?s.isOnBlur:a.isOnBlur)?!e:(t?s.isOnChange:a.isOnChange)?e:!0,ks=(e,i)=>!xe(y(e,i)).length&&T(e,i);const Rs={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function As(e={},i){let t={...Rs,...e},s={submitCount:0,isDirty:!1,isLoading:Y(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},a={},l=N(t.defaultValues)||N(t.values)?H(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:H(l),v={action:!1,mount:!1,watch:!1},p={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,F=0;const x={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:Ce(),array:Ce(),state:Ce()},L=e.resetOptions&&e.resetOptions.keepDirtyValues,k=st(t.mode),O=st(t.reValidateMode),B=t.criteriaMode===W.all,ce=r=>n=>{clearTimeout(F),F=setTimeout(r,n)},_=async r=>{if(x.isValid||r){const n=t.resolver?I((await z()).errors):await Q(a,!0);n!==s.isValid&&b.state.next({isValid:n})}},$=r=>x.isValidating&&b.state.next({isValidating:r}),J=(r,n=[],o,h,f=!0,c=!0)=>{if(h&&o){if(v.action=!0,c&&Array.isArray(y(a,r))){const m=o(y(a,r),h.argA,h.argB);f&&R(a,r,m)}if(c&&Array.isArray(y(s.errors,r))){const m=o(y(s.errors,r),h.argA,h.argB);f&&R(s.errors,r,m),ks(s.errors,r)}if(x.touchedFields&&c&&Array.isArray(y(s.touchedFields,r))){const m=o(y(s.touchedFields,r),h.argA,h.argB);f&&R(s.touchedFields,r,m)}x.dirtyFields&&(s.dirtyFields=Ne(l,d)),b.state.next({name:r,isDirty:V(r,n),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else R(d,r,n)},E=(r,n)=>{R(s.errors,r,n),b.state.next({errors:s.errors})},de=(r,n,o,h)=>{const f=y(a,r);if(f){const c=y(d,r,q(o)?y(l,r):o);q(c)||h&&h.defaultChecked||n?R(d,r,n?c:Ee(f._f)):P(r,c),v.mount&&_()}},re=(r,n,o,h,f)=>{let c=!1,m=!1;const A={name:r};if(!o||h){x.isDirty&&(m=s.isDirty,s.isDirty=A.isDirty=V(),c=m!==A.isDirty);const C=se(y(l,r),n);m=y(s.dirtyFields,r),C?T(s.dirtyFields,r):R(s.dirtyFields,r,!0),A.dirtyFields=s.dirtyFields,c=c||x.dirtyFields&&m!==!C}if(o){const C=y(s.touchedFields,r);C||(R(s.touchedFields,r,o),A.touchedFields=s.touchedFields,c=c||x.touchedFields&&C!==o)}return c&&f&&b.state.next(A),c?A:{}},ke=(r,n,o,h)=>{const f=y(s.errors,r),c=x.isValid&&te(n)&&s.isValid!==n;if(e.delayError&&o?(w=ce(()=>E(r,o)),w(e.delayError)):(clearTimeout(F),w=null,o?R(s.errors,r,o):T(s.errors,r)),(o?!se(f,o):f)||!I(h)||c){const m={...h,...c&&te(n)?{isValid:n}:{},errors:s.errors,name:r};s={...s,...m},b.state.next(m)}$(!1)},z=async r=>t.resolver(d,t.context,Fs(r||p.mount,a,t.criteriaMode,t.shouldUseNativeValidation)),Z=async r=>{const{errors:n}=await z(r);if(r)for(const o of r){const h=y(n,o);h?R(s.errors,o,h):T(s.errors,o)}else s.errors=n;return n},Q=async(r,n,o={valid:!0})=>{for(const h in r){const f=r[h];if(f){const{_f:c,...m}=f;if(c){const A=p.array.has(c.name),C=await ot(f,d,B,t.shouldUseNativeValidation&&!n,A);if(C[c.name]&&(o.valid=!1,n))break;!n&&(y(C,c.name)?A?bs(s.errors,C,c.name):R(s.errors,c.name,C[c.name]):T(s.errors,c.name))}m&&await Q(m,n,o)}}return o.valid},j=()=>{for(const r of p.unMount){const n=y(a,r);n&&(n._f.refs?n._f.refs.every(o=>!qe(o)):!qe(n._f.ref))&&Re(r)}p.unMount=new Set},V=(r,n)=>(r&&n&&R(d,r,n),!se(We(),l)),S=(r,n,o)=>kt(r,p,{...v.mount?d:q(n)?l:K(r)?{[r]:n}:n},o,n),U=r=>xe(y(v.mount?d:l,r,e.shouldUnregister?y(l,r,[]):[])),P=(r,n,o={})=>{const h=y(a,r);let f=n;if(h){const c=h._f;c&&(!c.disabled&&R(d,r,Nt(n,c)),f=Ve(c.ref)&&M(n)?"":n,St(c.ref)?[...c.ref.options].forEach(m=>m.selected=f.includes(m.value)):c.refs?ge(c.ref)?c.refs.length>1?c.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(f)?!!f.find(A=>A===m.value):f===m.value)):c.refs[0]&&(c.refs[0].checked=!!f):c.refs.forEach(m=>m.checked=m.value===f):$e(c.ref)?c.ref.value="":(c.ref.value=f,c.ref.type||b.values.next({name:r,values:{...d}})))}(o.shouldDirty||o.shouldTouch)&&re(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&ye(r)},G=(r,n,o)=>{for(const h in n){const f=n[h],c=`${r}.${h}`,m=y(a,c);(p.array.has(r)||!we(f)||m&&!m._f)&&!le(f)?G(c,f,o):P(c,f,o)}},ee=(r,n,o={})=>{const h=y(a,r),f=p.array.has(r),c=H(n);R(d,r,c),f?(b.array.next({name:r,values:{...d}}),(x.isDirty||x.dirtyFields)&&o.shouldDirty&&b.state.next({name:r,dirtyFields:Ne(l,d),isDirty:V(r,c)})):h&&!h._f&&!M(c)?G(r,c,o):P(r,c,o),rt(r,p)&&b.state.next({...s}),b.values.next({name:r,values:{...d}}),!v.mount&&i()},fe=async r=>{const n=r.target;let o=n.name,h=!0;const f=y(a,o),c=()=>n.type?Ee(f._f):_t(r);if(f){let m,A;const C=c(),ie=r.type===_e.BLUR||r.type===_e.FOCUS_OUT,Ot=!ws(f._f)&&!t.resolver&&!y(s.errors,o)&&!f._f.deps||js(ie,y(s.touchedFields,o),s.isSubmitted,O,k),De=rt(o,p,ie);R(d,o,C),ie?(f._f.onBlur&&f._f.onBlur(r),w&&w(0)):f._f.onChange&&f._f.onChange(r);const Se=re(o,C,ie,!1),Mt=!I(Se)||De;if(!ie&&b.values.next({name:o,type:r.type,values:{...d}}),Ot)return x.isValid&&_(),Mt&&b.state.next({name:o,...De?{}:Se});if(!ie&&De&&b.state.next({...s}),$(!0),t.resolver){const{errors:Ze}=await z([o]),Ut=ut(s.errors,a,o),et=ut(Ze,a,Ut.name||o);m=et.error,o=et.name,A=I(Ze)}else m=(await ot(f,d,B,t.shouldUseNativeValidation))[o],h=isNaN(C)||C===y(d,o,C),h&&(m?A=!1:x.isValid&&(A=await Q(a,!0)));h&&(f._f.deps&&ye(f._f.deps),ke(o,A,m,Se))}},ye=async(r,n={})=>{let o,h;const f=pe(r);if($(!0),t.resolver){const c=await Z(q(r)?r:f);o=I(c),h=r?!f.some(m=>y(c,m)):o}else r?(h=(await Promise.all(f.map(async c=>{const m=y(a,c);return await Q(m&&m._f?{[c]:m}:m)}))).every(Boolean),!(!h&&!s.isValid)&&_()):h=o=await Q(a);return b.state.next({...!K(r)||x.isValid&&o!==s.isValid?{}:{name:r},...t.resolver||!r?{isValid:o}:{},errors:s.errors,isValidating:!1}),n.shouldFocus&&!h&&Oe(a,c=>c&&y(s.errors,c),r?f:p.mount),h},We=r=>{const n={...l,...v.mount?d:{}};return q(r)?n:K(r)?y(n,r):r.map(o=>y(n,o))},ze=(r,n)=>({invalid:!!y((n||s).errors,r),isDirty:!!y((n||s).dirtyFields,r),isTouched:!!y((n||s).touchedFields,r),error:y((n||s).errors,r)}),Et=r=>{r&&pe(r).forEach(n=>T(s.errors,n)),b.state.next({errors:r?s.errors:{}})},Ge=(r,n,o)=>{const h=(y(a,r,{_f:{}})._f||{}).ref;R(s.errors,r,{...n,ref:h}),b.state.next({name:r,errors:s.errors,isValid:!1}),o&&o.shouldFocus&&h&&h.focus&&h.focus()},Tt=(r,n)=>Y(r)?b.values.subscribe({next:o=>r(S(void 0,n),o)}):S(r,n,!0),Re=(r,n={})=>{for(const o of r?pe(r):p.mount)p.mount.delete(o),p.array.delete(o),n.keepValue||(T(a,o),T(d,o)),!n.keepError&&T(s.errors,o),!n.keepDirty&&T(s.dirtyFields,o),!n.keepTouched&&T(s.touchedFields,o),!t.shouldUnregister&&!n.keepDefaultValue&&T(l,o);b.values.next({values:{...d}}),b.state.next({...s,...n.keepDirty?{isDirty:V()}:{}}),!n.keepIsValid&&_()},Ke=({disabled:r,name:n,field:o,fields:h})=>{if(te(r)){const f=r?void 0:y(d,n,Ee(o?o._f:y(h,n)._f));R(d,n,f),re(n,f,!1,!1,!0)}},Ae=(r,n={})=>{let o=y(a,r);const h=te(n.disabled);return R(a,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...n}}),p.mount.add(r),o?Ke({field:o,disabled:n.disabled,name:r}):de(r,!0,n.value),{...h?{disabled:n.disabled}:{},...t.progressive?{required:!!n.required,min:he(n.min),max:he(n.max),minLength:he(n.minLength),maxLength:he(n.maxLength),pattern:he(n.pattern)}:{},name:r,onChange:fe,onBlur:fe,ref:f=>{if(f){Ae(r,n),o=y(a,r);const c=q(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=Vs(c),A=o._f.refs||[];if(m?A.find(C=>C===c):c===o._f.ref)return;R(a,r,{_f:{...o._f,...m?{refs:[...A.filter(qe),c,...Array.isArray(y(l,r))?[{}]:[]],ref:{type:c.type,name:r}}:{ref:c}}}),de(r,!1,void 0,c)}else o=y(a,r,{}),o._f&&(o._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&!(Vt(p.array,r)&&v.action)&&p.unMount.add(r)}}},Je=()=>t.shouldFocusError&&Oe(a,r=>r&&y(s.errors,r),p.mount),Qe=(r,n)=>async o=>{o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let h=H(d);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:c}=await z();s.errors=f,h=c}else await Q(a);T(s.errors,"root"),I(s.errors)?(b.state.next({errors:{}}),await r(h,o)):(n&&await n({...s.errors},o),Je(),setTimeout(Je)),b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(s.errors),submitCount:s.submitCount+1,errors:s.errors})},Lt=(r,n={})=>{y(a,r)&&(q(n.defaultValue)?ee(r,y(l,r)):(ee(r,n.defaultValue),R(l,r,n.defaultValue)),n.keepTouched||T(s.touchedFields,r),n.keepDirty||(T(s.dirtyFields,r),s.isDirty=n.defaultValue?V(r,y(l,r)):V()),n.keepError||(T(s.errors,r),x.isValid&&_()),b.state.next({...s}))},Xe=(r,n={})=>{const o=r?H(r):l,h=H(o),f=r&&!I(r)?h:l;if(n.keepDefaultValues||(l=o),!n.keepValues){if(n.keepDirtyValues||L)for(const c of p.mount)y(s.dirtyFields,c)?R(f,c,y(d,c)):ee(c,y(f,c));else{if(Ue&&q(r))for(const c of p.mount){const m=y(a,c);if(m&&m._f){const A=Array.isArray(m._f.refs)?m._f.refs[0]:m._f.ref;if(Ve(A)){const C=A.closest("form");if(C){C.reset();break}}}}a={}}d=e.shouldUnregister?n.keepDefaultValues?H(l):{}:H(f),b.array.next({values:{...f}}),b.values.next({values:{...f}})}p={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!v.mount&&i(),v.mount=!x.isValid||!!n.keepIsValid,v.watch=!!e.shouldUnregister,b.state.next({submitCount:n.keepSubmitCount?s.submitCount:0,isDirty:n.keepDirty?s.isDirty:!!(n.keepDefaultValues&&!se(r,l)),isSubmitted:n.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:n.keepDirtyValues?s.dirtyFields:n.keepDefaultValues&&r?Ne(l,r):{},touchedFields:n.keepTouched?s.touchedFields:{},errors:n.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Ye=(r,n)=>Xe(Y(r)?r(d):r,n);return{control:{register:Ae,unregister:Re,getFieldState:ze,handleSubmit:Qe,setError:Ge,_executeSchema:z,_getWatch:S,_getDirty:V,_updateValid:_,_removeUnmounted:j,_updateFieldArray:J,_updateDisabledField:Ke,_getFieldArray:U,_reset:Xe,_resetDefaultValues:()=>Y(t.defaultValues)&&t.defaultValues().then(r=>{Ye(r,t.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:r=>{s={...s,...r}},_subjects:b,_proxyFormState:x,get _fields(){return a},get _formValues(){return d},get _state(){return v},set _state(r){v=r},get _defaultValues(){return l},get _names(){return p},set _names(r){p=r},get _formState(){return s},set _formState(r){s=r},get _options(){return t},set _options(r){t={...t,...r}}},trigger:ye,register:Ae,handleSubmit:Qe,watch:Tt,setValue:ee,getValues:We,reset:Ye,resetField:Lt,clearErrors:Et,unregister:Re,setError:Ge,setFocus:(r,n={})=>{const o=y(a,r),h=o&&o._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),n.shouldSelect&&f.select())}},getFieldState:ze}}function Ds(e={}){const i=D.useRef(),t=D.useRef(),[s,a]=D.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...As(e,()=>a(d=>({...d}))),formState:s});const l=i.current.control;return l._options=e,Pe({subject:l._subjects.state,next:d=>{wt(d,l._proxyFormState,l._updateFormState,!0)&&a({...l._formState})}}),D.useEffect(()=>{e.values&&!se(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values):l._resetDefaultValues()},[e.values,l]),D.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),i.current.formState=Ft(s,l),i.current}const Ss=({cars:e})=>{const i=dt(cs),t=yt(),{pathname:s}=ts(),a=s==="/favorites"&&(e==null?void 0:e.length)===0,l=ss(e),d=ls(e,"make"),{register:v,handleSubmit:p,control:w,reset:F,formState:{errors:x}}=Ds({mode:"onChange",shouldDisable:a});oe.useEffect(()=>{F(i)},[i,F]);const b=k=>{t(rs(k))},L=()=>{t(is()),F({brand:"",price:"",from:"",to:""})};return u.jsx("form",{onSubmit:p(b),className:`form flex-wrap ${a?"pointer-events-none opacity-60":""}`,disabled:a,children:u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[u.jsxs("div",{className:"form mb-2 flex-wrap items-center gap-3",children:[u.jsxs("div",{className:"select-wrapper mb-2",children:[u.jsx("label",{htmlFor:"brand",className:"select-label",children:"Car brand"}),u.jsx(tt,{name:"brand",control:w,rules:{required:!0,message:"Brand is required"},render:({field:k})=>u.jsxs(u.Fragment,{children:[u.jsxs("select",{...k,className:"select-brand",children:[u.jsx("option",{value:"",className:"select-placeholder",children:"Enter the text"}),d&&d.map((O,B)=>u.jsx("option",{value:O,className:"select-text",children:O},B))]}),x.brand&&u.jsx("p",{className:`error ${a?"opacity-0":"opacity-100"}`,children:x.brand.type==="required"?"Brand is required":x.brand.message})]})})]}),u.jsxs("div",{className:"select-wrapper mb-2",children:[u.jsx("label",{htmlFor:"price",className:"select-label",children:"Price/ 1 hour"}),u.jsx("div",{children:u.jsx(tt,{name:"price",control:w,rules:{required:!0,min:{value:0,message:"Must be 0 or greater"}},render:({field:k})=>u.jsxs(u.Fragment,{children:[u.jsxs("select",{...k,className:"select-price",children:[u.jsx("option",{value:"",className:"select-placeholder",children:"To $"}),l&&l.map((O,B)=>u.jsx("option",{value:O,className:"select-text",children:O},B))]}),x.price&&u.jsx("p",{className:`error ${a?"opacity-0":"opacity-100"}`,children:x.price.type==="required"?"Price is required":x.price.message})]})})})]}),u.jsxs("div",{className:"select-wrapper mb-2",children:[u.jsx("label",{htmlFor:"minMileage",className:"select-label",children:"Car mileage / km (from)"}),u.jsxs("div",{className:"flex",children:[u.jsx("input",{type:"number",placeholder:"From",className:"select-placeholder select-from",...v("from",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"}})}),u.jsx("input",{type:"number",placeholder:"To",className:"select-placeholder select-to",...v("to",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"},validate:(k,{from:O})=>parseInt(k)>parseInt(O)?!0:"To must be greater than From"})}),u.jsxs("p",{className:`error flex items-center justify-between gap-1 ${a?"opacity-0":"opacity-100"}`,children:[(x==null?void 0:x.from)&&u.jsx("span",{children:x.from.message}),(x==null?void 0:x.to)&&u.jsx("span",{children:x.to.message})]})]})]})]}),u.jsxs("div",{className:"-mt-6 mb-2 flex flex-wrap items-center justify-center gap-3",children:[u.jsx(me,{type:"submit",className:"button-search",label:"Search"}),u.jsx(me,{type:"button",className:"button-search",onClick:L,label:"Reset"})]})]})})};Ss.propTypes={cars:g.array.isRequired};export{ds as C,Ss as F,Me as T,cs as a,us as b,ls as c,Ts as s,yt as u};
