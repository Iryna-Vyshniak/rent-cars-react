import{k as ve,l as Bt,m as Pt,r as oe,P as g,j as u,n as It,o as $t,B as me,p as Ht,q as Wt,t as zt,v as Gt,T as ct,w as Te,x as Kt,y as Jt,i as Qt,u as dt,z as Xt,A as Yt,D as Zt,E as es,R as S,F as ts,s as ss,G as rs}from"./index-fe6c80cd.js";function ft(e=ve){const i=e===ve?Bt:Pt(e);return function(){const{store:s}=i();return s}}const is=ft();function as(e=ve){const i=e===ve?is:ft(e);return function(){return i().dispatch}}const yt=as(),ht="/rent-cars-react/assets/car-8d70796c.jpg",ns=(e,i)=>{const[t,s]=oe.useState([]);return oe.useEffect(()=>{if(!i)return;const a=[...new Set(e.map(l=>l[i]))];s(a)},[e,i]),t},Me=({src:e,alt:i,className:t,blockClass:s,width:a,height:l})=>u.jsx("div",{className:s?`mb-[14px] max-w-full overflow-hidden rounded-[14px] ${s}`:"thumb mb-[14px] max-w-full overflow-hidden rounded-[14px]",children:u.jsx("img",{src:e?`${e}`:ht,alt:i,className:t?`block h-auto max-w-full object-cover object-center ${t}`:"block h-auto max-w-full  object-cover object-center",width:a,height:l,loading:"lazy"})});Me.propTypes={src:g.string.isRequired,alt:g.string.isRequired,className:g.string,blockClass:g.string,width:g.string.isRequired,height:g.string};const ls=document.getElementById("modal"),mt=({onClose:e,children:i,isOpen:t})=>{oe.useEffect(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="visible"},[t]);const s=oe.useCallback(a=>{document.body.style.overflow="visible",It(a,e)},[e]);return oe.useEffect(()=>(document.body.addEventListener("keydown",s),()=>document.body.removeEventListener("keydown",s)),[s]),$t.createPortal(u.jsx("div",{className:"backdrop",onClick:s,children:u.jsxs("div",{className:"modal max-w-full dark:bg-slate-700",children:[u.jsx(me,{onClick:e,className:"close",type:"button",iconURL:"#icon-close",ariaLabel:"close icon"}),i]})}),ls)};mt.propTypes={children:g.node.isRequired,onClose:g.func.isRequired,isOpen:g.bool};const ue=()=>u.jsx("span",{className:"vector dark:text-white/50",children:"|"}),ne=({conditionText:e,conditionValue:i})=>u.jsxs("li",{className:"modal-btn-cond dark:bg-slate-600",children:[u.jsx("p",{className:"cond dark:text-white/50",children:e}),i&&u.jsx("span",{className:"modal-accent-cond",children:i})]});ne.propTypes={conditionText:g.string.isRequired,conditionValue:g.string};const gt=({rentConditions:e,mile:i,price:t,title:s})=>u.jsxs("div",{className:"mb-[24px] ",children:[u.jsxs("p",{className:"modal-second-title dark:text-white",children:[s,":"]}),u.jsxs("ul",{className:"modal-cond-block gap-3",children:[u.jsx(ne,{conditionText:e[0],conditionValue:e[1]}),u.jsx(ne,{conditionText:e[2]}),u.jsx(ne,{conditionText:e[3]}),u.jsx(ne,{conditionText:"Mileage: ",conditionValue:i}),u.jsx(ne,{conditionText:"Price: ",conditionValue:`${t}$`})]})]});gt.propTypes={rentConditions:g.array.isRequired,mile:g.string.isRequired,price:g.string.isRequired,title:g.string.isRequired};const Le=({items:e,separator:i})=>u.jsx("ul",{className:"mb-[4px] flex flex-wrap items-center justify-start",children:e.map((t,s)=>u.jsxs("li",{className:"text-description dark:text-white/50",children:[t,s<e.length-1&&i]},s))});Le.propTypes={items:g.array.isRequired,separator:g.any};const xt=({accessories:e,functionalities:i,title:t})=>u.jsxs("div",{className:"mb-[24px]",children:[u.jsxs("p",{className:"modal-second-title dark:text-white",children:[t,":"]}),u.jsx(Le,{items:e,separator:u.jsx(ue,{})}),u.jsx(Le,{items:i,separator:u.jsx(ue,{})})]});xt.propTypes={accessories:g.array.isRequired,functionalities:g.array.isRequired,title:g.string.isRequired};const pt=({car:e})=>{const{year:i,make:t,model:s,img:a,rentalPrice:l,address:d,description:b,accessories:p,functionalities:v,rentalConditions:w,mileage:V}=e,x=Kt(e),A=Ht(d,e),R=Wt(w),Q=zt(V),X=Gt(l);return u.jsxs(u.Fragment,{children:[u.jsx(Me,{width:"461",height:"248",src:a,alt:`${t} ${s}`,className:"modal-car",blockClass:"w-[461px] h-[248px]"}),u.jsxs(ct,{className:"modal-title",children:[t," ",u.jsx("span",{className:"modal-accent-title",children:s}),", ",i]}),u.jsxs("div",{className:"mb-[14px] gap-[4px]",children:[u.jsx("ul",{className:"modal-description mb-[4px] flex items-center justify-start",children:Te(A,u.jsx(ue,{}))}),u.jsx("ul",{className:"modal-description flex items-center justify-start",children:Te(x,u.jsx(ue,{}))})]}),u.jsx("div",{className:"modal-accent-descr dark:text-white",children:b}),u.jsx(xt,{title:"Accessories and functionalities",accessories:p,functionalities:v}),u.jsx(gt,{title:"Rental Conditions",rentConditions:R,mile:Q,price:X}),u.jsx("a",{href:"tel:+380730000000",className:"modal-btn-link",children:"Rental car"})]})};pt.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired,accessories:g.array.isRequired,rentalConditions:g.string.isRequired}).isRequired};const Es=e=>e.cars.items,os=e=>e.cars.favorites,us=e=>e.cars.filter,bt=({locationData:e,carData:i})=>u.jsxs(u.Fragment,{children:[u.jsx("ul",{className:"card-info-block flex-wrap dark:text-white/50",children:Te(e,u.jsx(ue,{}))}),u.jsx("ul",{className:"card-info-block mb-[28px] dark:text-white/50",children:Object.entries(i).map(([t,s],a,l)=>u.jsxs("li",{className:"text-description dark:text-white/50",children:[Jt(t,s),a<l.length-1&&u.jsx(ue,{})]},a))})]});bt.propTypes={carData:g.object.isRequired,locationData:g.array.isRequired};const cs=({car:e})=>{const{isOpen:i,open:t,close:s}=Qt(!1),a=dt(os),l=yt(),{id:d,year:b,make:p,model:v,img:w,rentalPrice:V,address:x}=e,A=Yt(e),R=Xt(x,e),Q=a==null?void 0:a.some(ce=>ce.id===d),X=()=>l(Q?Zt(e):es(e));return u.jsx(u.Fragment,{children:u.jsxs("li",{className:"card flex-auto",children:[u.jsx(me,{type:"button",iconURL:"#icon-heart",ariaLabel:"heart icon",onClick:X,className:`heart ${Q?"favorite":""}`}),u.jsx(Me,{className:"card-image",src:w||ht,alt:`${p} ${v}`,width:"274",height:"426"}),u.jsxs(ct,{children:[u.jsxs("span",{className:"truncate hover:text-clip dark:text-white",children:[p,u.jsx("span",{className:"title-accent ml-1",children:v}),", ",b]}),u.jsx("span",{className:"dark:text-white",children:V})]}),u.jsx(bt,{locationData:R,carData:A}),u.jsx(me,{label:"Learn more",className:"card-big-button",onClick:t}),i&&u.jsx(mt,{isOpen:i,onClose:s,children:u.jsx(pt,{car:e})})]})})};cs.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired}).isRequired,fav:g.bool};var ge=e=>e.type==="checkbox",le=e=>e instanceof Date,O=e=>e==null;const vt=e=>typeof e=="object";var E=e=>!O(e)&&!Array.isArray(e)&&vt(e)&&!le(e),_t=e=>E(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,ds=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Vt=(e,i)=>e.has(ds(i)),fs=e=>{const i=e.constructor&&e.constructor.prototype;return E(i)&&i.hasOwnProperty("isPrototypeOf")},Ue=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function I(e){let i;const t=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Ue&&(e instanceof Blob||e instanceof FileList))&&(t||E(e)))if(i=t?[]:{},!t&&!fs(e))i=e;else for(const s in e)e.hasOwnProperty(s)&&(i[s]=I(e[s]));else return e;return i}var xe=e=>Array.isArray(e)?e.filter(Boolean):[],N=e=>e===void 0,y=(e,i,t)=>{if(!i||!E(e))return t;const s=xe(i.split(/[,[\].]+?/)).reduce((a,l)=>O(a)?a:a[l],e);return N(s)||s===e?N(e[i])?t:e[i]:s};const _e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},$={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ys=S.createContext(null),Be=()=>S.useContext(ys);var Ft=(e,i,t,s=!0)=>{const a={defaultValues:i._defaultValues};for(const l in e)Object.defineProperty(a,l,{get:()=>{const d=l;return i._proxyFormState[d]!==$.all&&(i._proxyFormState[d]=!s||$.all),t&&(t[d]=!0),e[d]}});return a},B=e=>E(e)&&!Object.keys(e).length,wt=(e,i,t,s)=>{t(e);const{name:a,...l}=e;return B(l)||Object.keys(l).length>=Object.keys(i).length||Object.keys(l).find(d=>i[d]===(!s||$.all))},pe=e=>Array.isArray(e)?e:[e],jt=(e,i,t)=>t&&i?e===i||Array.isArray(e)&&e.some(s=>s&&t&&s===i):!e||!i||e===i||pe(e).some(s=>s&&(s.startsWith(i)||i.startsWith(s)));function Pe(e){const i=S.useRef(e);i.current=e,S.useEffect(()=>{const t=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function hs(e){const i=Be(),{control:t=i.control,disabled:s,name:a,exact:l}=e||{},[d,b]=S.useState(t._formState),p=S.useRef(!0),v=S.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),w=S.useRef(a);return w.current=a,Pe({disabled:s,next:V=>p.current&&jt(w.current,V.name,l)&&wt(V,v.current,t._updateFormState)&&b({...t._formState,...V}),subject:t._subjects.state}),S.useEffect(()=>(p.current=!0,v.current.isValid&&t._updateValid(!0),()=>{p.current=!1}),[t]),Ft(d,t,v.current,!1)}var z=e=>typeof e=="string",kt=(e,i,t,s,a)=>z(e)?(s&&i.watch.add(e),y(t,e,a)):Array.isArray(e)?e.map(l=>(s&&i.watch.add(l),y(t,l))):(s&&(i.watchAll=!0),t);function ms(e){const i=Be(),{control:t=i.control,name:s,defaultValue:a,disabled:l,exact:d}=e||{},b=S.useRef(s);b.current=s,Pe({disabled:l,subject:t._subjects.values,next:w=>{jt(b.current,w.name,d)&&v(I(kt(b.current,t._names,w.values||t._formValues,!1,a)))}});const[p,v]=S.useState(t._getWatch(s,a));return S.useEffect(()=>t._removeUnmounted()),p}var Ie=e=>/^\w*$/.test(e),Rt=e=>xe(e.replace(/["|']|\]/g,"").split(/\.|\[/));function k(e,i,t){let s=-1;const a=Ie(i)?[i]:Rt(i),l=a.length,d=l-1;for(;++s<l;){const b=a[s];let p=t;if(s!==d){const v=e[b];p=E(v)||Array.isArray(v)?v:isNaN(+a[s+1])?{}:[]}e[b]=p,e=e[b]}return e}function gs(e){const i=Be(),{name:t,disabled:s,control:a=i.control,shouldUnregister:l}=e,d=Vt(a._names.array,t),b=ms({control:a,name:t,defaultValue:y(a._formValues,t,y(a._defaultValues,t,e.defaultValue)),exact:!0}),p=hs({control:a,name:t}),v=S.useRef(a.register(t,{...e.rules,value:b}));return v.current=a.register(t,e.rules),S.useEffect(()=>{const w=a._options.shouldUnregister||l,V=(x,A)=>{const R=y(a._fields,x);R&&(R._f.mount=A)};if(V(t,!0),w){const x=I(y(a._options.defaultValues,t));k(a._defaultValues,t,x),N(y(a._formValues,t))&&k(a._formValues,t,x)}return()=>{(d?w&&!a._state.action:w)?a.unregister(t):V(t,!1)}},[t,a,d,l]),S.useEffect(()=>{a._updateDisabledField({disabled:s,fields:a._fields,name:t})},[s,t,a]),{field:{name:t,value:b,disabled:s,onChange:S.useCallback(w=>v.current.onChange({target:{value:_t(w),name:t},type:_e.CHANGE}),[t]),onBlur:S.useCallback(()=>v.current.onBlur({target:{value:y(a._formValues,t),name:t},type:_e.BLUR}),[t,a]),ref:w=>{const V=y(a._fields,t);V&&w&&(V._f.ref={focus:()=>w.focus(),select:()=>w.select(),setCustomValidity:x=>w.setCustomValidity(x),reportValidity:()=>w.reportValidity()})}},formState:p,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(p.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(p.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(p.touchedFields,t)},error:{enumerable:!0,get:()=>y(p.errors,t)}})}}const tt=e=>e.render(gs(e));var xs=(e,i,t,s,a)=>i?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:a||!0}}:{};const Oe=(e,i,t)=>{for(const s of t||Object.keys(e)){const a=y(e,s);if(a){const{_f:l,...d}=a;if(l&&i(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else E(d)&&Oe(d,i)}}};var st=e=>({isOnSubmit:!e||e===$.onSubmit,isOnBlur:e===$.onBlur,isOnChange:e===$.onChange,isOnAll:e===$.all,isOnTouch:e===$.onTouched}),rt=(e,i,t)=>!t&&(i.watchAll||i.watch.has(e)||[...i.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length)))),ps=(e,i,t)=>{const s=xe(y(e,t));return k(s,"root",i[t]),k(e,t,s),e},te=e=>typeof e=="boolean",$e=e=>e.type==="file",Y=e=>typeof e=="function",Ve=e=>{if(!Ue)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},be=e=>z(e),He=e=>e.type==="radio",Fe=e=>e instanceof RegExp;const it={value:!1,isValid:!1},at={value:!0,isValid:!0};var At=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!N(e[0].attributes.value)?N(e[0].value)||e[0].value===""?at:{value:e[0].value,isValid:!0}:at:it}return it};const nt={isValid:!1,value:null};var Dt=e=>Array.isArray(e)?e.reduce((i,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:i,nt):nt;function lt(e,i,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||te(e)&&!e)return{type:t,message:be(e)?e:"",ref:i}}var ae=e=>E(e)&&!Fe(e)?e:{value:e,message:""},ot=async(e,i,t,s,a)=>{const{ref:l,refs:d,required:b,maxLength:p,minLength:v,min:w,max:V,pattern:x,validate:A,name:R,valueAsNumber:Q,mount:X,disabled:ce}=e._f,_=y(i,R);if(!X||ce)return{};const P=d?d[0]:l,G=j=>{s&&P.reportValidity&&(P.setCustomValidity(te(j)?"":j||""),P.reportValidity())},T={},de=He(l),re=ge(l),ke=de||re,H=(Q||$e(l))&&N(l.value)&&N(_)||Ve(l)&&l.value===""||_===""||Array.isArray(_)&&!_.length,Z=xs.bind(null,R,t,T),K=(j,F,C,M=J.maxLength,U=J.minLength)=>{const W=j?F:C;T[R]={type:j?M:U,message:W,ref:l,...Z(j?M:U,W)}};if(a?!Array.isArray(_)||!_.length:b&&(!ke&&(H||O(_))||te(_)&&!_||re&&!At(d).isValid||de&&!Dt(d).isValid)){const{value:j,message:F}=be(b)?{value:!!b,message:b}:ae(b);if(j&&(T[R]={type:J.required,message:F,ref:P,...Z(J.required,F)},!t))return G(F),T}if(!H&&(!O(w)||!O(V))){let j,F;const C=ae(V),M=ae(w);if(!O(_)&&!isNaN(_)){const U=l.valueAsNumber||_&&+_;O(C.value)||(j=U>C.value),O(M.value)||(F=U<M.value)}else{const U=l.valueAsDate||new Date(_),W=ye=>new Date(new Date().toDateString()+" "+ye),ee=l.type=="time",fe=l.type=="week";z(C.value)&&_&&(j=ee?W(_)>W(C.value):fe?_>C.value:U>new Date(C.value)),z(M.value)&&_&&(F=ee?W(_)<W(M.value):fe?_<M.value:U<new Date(M.value))}if((j||F)&&(K(!!j,C.message,M.message,J.max,J.min),!t))return G(T[R].message),T}if((p||v)&&!H&&(z(_)||a&&Array.isArray(_))){const j=ae(p),F=ae(v),C=!O(j.value)&&_.length>+j.value,M=!O(F.value)&&_.length<+F.value;if((C||M)&&(K(C,j.message,F.message),!t))return G(T[R].message),T}if(x&&!H&&z(_)){const{value:j,message:F}=ae(x);if(Fe(j)&&!_.match(j)&&(T[R]={type:J.pattern,message:F,ref:l,...Z(J.pattern,F)},!t))return G(F),T}if(A){if(Y(A)){const j=await A(_,i),F=lt(j,P);if(F&&(T[R]={...F,...Z(J.validate,F.message)},!t))return G(F.message),T}else if(E(A)){let j={};for(const F in A){if(!B(j)&&!t)break;const C=lt(await A[F](_,i),P,F);C&&(j={...C,...Z(F,C.message)},G(C.message),t&&(T[R]=j))}if(!B(j)&&(T[R]={ref:P,...j},!t))return T}}return G(!0),T};function bs(e,i){const t=i.slice(0,-1).length;let s=0;for(;s<t;)e=N(e)?s++:e[i[s++]];return e}function vs(e){for(const i in e)if(e.hasOwnProperty(i)&&!N(e[i]))return!1;return!0}function L(e,i){const t=Array.isArray(i)?i:Ie(i)?[i]:Rt(i),s=t.length===1?e:bs(e,t),a=t.length-1,l=t[a];return s&&delete s[l],a!==0&&(E(s)&&B(s)||Array.isArray(s)&&vs(s))&&L(e,t.slice(0,-1)),e}function Ce(){let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next&&l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}}var we=e=>O(e)||!vt(e);function se(e,i){if(we(e)||we(i))return e===i;if(le(e)&&le(i))return e.getTime()===i.getTime();const t=Object.keys(e),s=Object.keys(i);if(t.length!==s.length)return!1;for(const a of t){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const d=i[a];if(le(l)&&le(d)||E(l)&&E(d)||Array.isArray(l)&&Array.isArray(d)?!se(l,d):l!==d)return!1}}return!0}var St=e=>e.type==="select-multiple",_s=e=>He(e)||ge(e),qe=e=>Ve(e)&&e.isConnected,Ct=e=>{for(const i in e)if(Y(e[i]))return!0;return!1};function je(e,i={}){const t=Array.isArray(e);if(E(e)||t)for(const s in e)Array.isArray(e[s])||E(e[s])&&!Ct(e[s])?(i[s]=Array.isArray(e[s])?[]:{},je(e[s],i[s])):O(e[s])||(i[s]=!0);return i}function qt(e,i,t){const s=Array.isArray(e);if(E(e)||s)for(const a in e)Array.isArray(e[a])||E(e[a])&&!Ct(e[a])?N(i)||we(t[a])?t[a]=Array.isArray(e[a])?je(e[a],[]):{...je(e[a])}:qt(e[a],O(i)?{}:i[a],t[a]):t[a]=!se(e[a],i[a]);return t}var Ne=(e,i)=>qt(e,i,je(i)),Nt=(e,{valueAsNumber:i,valueAsDate:t,setValueAs:s})=>N(e)?e:i?e===""?NaN:e&&+e:t&&z(e)?new Date(e):s?s(e):e;function Ee(e){const i=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):i.disabled))return $e(i)?i.files:He(i)?Dt(e.refs).value:St(i)?[...i.selectedOptions].map(({value:t})=>t):ge(i)?At(e.refs).value:Nt(N(i.value)?e.ref.value:i.value,e)}var Vs=(e,i,t,s)=>{const a={};for(const l of e){const d=y(i,l);d&&k(a,l,d._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:s}},he=e=>N(e)?e:Fe(e)?e.source:E(e)?Fe(e.value)?e.value.source:e.value:e,Fs=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ut(e,i,t){const s=y(e,t);if(s||Ie(t))return{error:s,name:t};const a=t.split(".");for(;a.length;){const l=a.join("."),d=y(i,l),b=y(e,l);if(d&&!Array.isArray(d)&&t!==l)return{name:t};if(b&&b.type)return{name:l,error:b};a.pop()}return{name:t}}var ws=(e,i,t,s,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(i||e):(t?s.isOnBlur:a.isOnBlur)?!e:(t?s.isOnChange:a.isOnChange)?e:!0,js=(e,i)=>!xe(y(e,i)).length&&L(e,i);const ks={mode:$.onSubmit,reValidateMode:$.onChange,shouldFocusError:!0};function Rs(e={},i){let t={...ks,...e},s={submitCount:0,isDirty:!1,isLoading:Y(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},a={},l=E(t.defaultValues)||E(t.values)?I(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:I(l),b={action:!1,mount:!1,watch:!1},p={mount:new Set,unMount:new Set,array:new Set,watch:new Set},v,w=0;const V={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:Ce(),array:Ce(),state:Ce()},A=e.resetOptions&&e.resetOptions.keepDirtyValues,R=st(t.mode),Q=st(t.reValidateMode),X=t.criteriaMode===$.all,ce=r=>n=>{clearTimeout(w),w=setTimeout(r,n)},_=async r=>{if(V.isValid||r){const n=t.resolver?B((await H()).errors):await K(a,!0);n!==s.isValid&&x.state.next({isValid:n})}},P=r=>V.isValidating&&x.state.next({isValidating:r}),G=(r,n=[],o,h,f=!0,c=!0)=>{if(h&&o){if(b.action=!0,c&&Array.isArray(y(a,r))){const m=o(y(a,r),h.argA,h.argB);f&&k(a,r,m)}if(c&&Array.isArray(y(s.errors,r))){const m=o(y(s.errors,r),h.argA,h.argB);f&&k(s.errors,r,m),js(s.errors,r)}if(V.touchedFields&&c&&Array.isArray(y(s.touchedFields,r))){const m=o(y(s.touchedFields,r),h.argA,h.argB);f&&k(s.touchedFields,r,m)}V.dirtyFields&&(s.dirtyFields=Ne(l,d)),x.state.next({name:r,isDirty:F(r,n),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else k(d,r,n)},T=(r,n)=>{k(s.errors,r,n),x.state.next({errors:s.errors})},de=(r,n,o,h)=>{const f=y(a,r);if(f){const c=y(d,r,N(o)?y(l,r):o);N(c)||h&&h.defaultChecked||n?k(d,r,n?c:Ee(f._f)):U(r,c),b.mount&&_()}},re=(r,n,o,h,f)=>{let c=!1,m=!1;const D={name:r};if(!o||h){V.isDirty&&(m=s.isDirty,s.isDirty=D.isDirty=F(),c=m!==D.isDirty);const q=se(y(l,r),n);m=y(s.dirtyFields,r),q?L(s.dirtyFields,r):k(s.dirtyFields,r,!0),D.dirtyFields=s.dirtyFields,c=c||V.dirtyFields&&m!==!q}if(o){const q=y(s.touchedFields,r);q||(k(s.touchedFields,r,o),D.touchedFields=s.touchedFields,c=c||V.touchedFields&&q!==o)}return c&&f&&x.state.next(D),c?D:{}},ke=(r,n,o,h)=>{const f=y(s.errors,r),c=V.isValid&&te(n)&&s.isValid!==n;if(e.delayError&&o?(v=ce(()=>T(r,o)),v(e.delayError)):(clearTimeout(w),v=null,o?k(s.errors,r,o):L(s.errors,r)),(o?!se(f,o):f)||!B(h)||c){const m={...h,...c&&te(n)?{isValid:n}:{},errors:s.errors,name:r};s={...s,...m},x.state.next(m)}P(!1)},H=async r=>t.resolver(d,t.context,Vs(r||p.mount,a,t.criteriaMode,t.shouldUseNativeValidation)),Z=async r=>{const{errors:n}=await H(r);if(r)for(const o of r){const h=y(n,o);h?k(s.errors,o,h):L(s.errors,o)}else s.errors=n;return n},K=async(r,n,o={valid:!0})=>{for(const h in r){const f=r[h];if(f){const{_f:c,...m}=f;if(c){const D=p.array.has(c.name),q=await ot(f,d,X,t.shouldUseNativeValidation&&!n,D);if(q[c.name]&&(o.valid=!1,n))break;!n&&(y(q,c.name)?D?ps(s.errors,q,c.name):k(s.errors,c.name,q[c.name]):L(s.errors,c.name))}m&&await K(m,n,o)}}return o.valid},j=()=>{for(const r of p.unMount){const n=y(a,r);n&&(n._f.refs?n._f.refs.every(o=>!qe(o)):!qe(n._f.ref))&&Re(r)}p.unMount=new Set},F=(r,n)=>(r&&n&&k(d,r,n),!se(We(),l)),C=(r,n,o)=>kt(r,p,{...b.mount?d:N(n)?l:z(r)?{[r]:n}:n},o,n),M=r=>xe(y(b.mount?d:l,r,e.shouldUnregister?y(l,r,[]):[])),U=(r,n,o={})=>{const h=y(a,r);let f=n;if(h){const c=h._f;c&&(!c.disabled&&k(d,r,Nt(n,c)),f=Ve(c.ref)&&O(n)?"":n,St(c.ref)?[...c.ref.options].forEach(m=>m.selected=f.includes(m.value)):c.refs?ge(c.ref)?c.refs.length>1?c.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(f)?!!f.find(D=>D===m.value):f===m.value)):c.refs[0]&&(c.refs[0].checked=!!f):c.refs.forEach(m=>m.checked=m.value===f):$e(c.ref)?c.ref.value="":(c.ref.value=f,c.ref.type||x.values.next({name:r,values:{...d}})))}(o.shouldDirty||o.shouldTouch)&&re(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&ye(r)},W=(r,n,o)=>{for(const h in n){const f=n[h],c=`${r}.${h}`,m=y(a,c);(p.array.has(r)||!we(f)||m&&!m._f)&&!le(f)?W(c,f,o):U(c,f,o)}},ee=(r,n,o={})=>{const h=y(a,r),f=p.array.has(r),c=I(n);k(d,r,c),f?(x.array.next({name:r,values:{...d}}),(V.isDirty||V.dirtyFields)&&o.shouldDirty&&x.state.next({name:r,dirtyFields:Ne(l,d),isDirty:F(r,c)})):h&&!h._f&&!O(c)?W(r,c,o):U(r,c,o),rt(r,p)&&x.state.next({...s}),x.values.next({name:r,values:{...d}}),!b.mount&&i()},fe=async r=>{const n=r.target;let o=n.name,h=!0;const f=y(a,o),c=()=>n.type?Ee(f._f):_t(r);if(f){let m,D;const q=c(),ie=r.type===_e.BLUR||r.type===_e.FOCUS_OUT,Ot=!Fs(f._f)&&!t.resolver&&!y(s.errors,o)&&!f._f.deps||ws(ie,y(s.touchedFields,o),s.isSubmitted,Q,R),De=rt(o,p,ie);k(d,o,q),ie?(f._f.onBlur&&f._f.onBlur(r),v&&v(0)):f._f.onChange&&f._f.onChange(r);const Se=re(o,q,ie,!1),Mt=!B(Se)||De;if(!ie&&x.values.next({name:o,type:r.type,values:{...d}}),Ot)return V.isValid&&_(),Mt&&x.state.next({name:o,...De?{}:Se});if(!ie&&De&&x.state.next({...s}),P(!0),t.resolver){const{errors:Ze}=await H([o]),Ut=ut(s.errors,a,o),et=ut(Ze,a,Ut.name||o);m=et.error,o=et.name,D=B(Ze)}else m=(await ot(f,d,X,t.shouldUseNativeValidation))[o],h=isNaN(q)||q===y(d,o,q),h&&(m?D=!1:V.isValid&&(D=await K(a,!0)));h&&(f._f.deps&&ye(f._f.deps),ke(o,D,m,Se))}},ye=async(r,n={})=>{let o,h;const f=pe(r);if(P(!0),t.resolver){const c=await Z(N(r)?r:f);o=B(c),h=r?!f.some(m=>y(c,m)):o}else r?(h=(await Promise.all(f.map(async c=>{const m=y(a,c);return await K(m&&m._f?{[c]:m}:m)}))).every(Boolean),!(!h&&!s.isValid)&&_()):h=o=await K(a);return x.state.next({...!z(r)||V.isValid&&o!==s.isValid?{}:{name:r},...t.resolver||!r?{isValid:o}:{},errors:s.errors,isValidating:!1}),n.shouldFocus&&!h&&Oe(a,c=>c&&y(s.errors,c),r?f:p.mount),h},We=r=>{const n={...l,...b.mount?d:{}};return N(r)?n:z(r)?y(n,r):r.map(o=>y(n,o))},ze=(r,n)=>({invalid:!!y((n||s).errors,r),isDirty:!!y((n||s).dirtyFields,r),isTouched:!!y((n||s).touchedFields,r),error:y((n||s).errors,r)}),Et=r=>{r&&pe(r).forEach(n=>L(s.errors,n)),x.state.next({errors:r?s.errors:{}})},Ge=(r,n,o)=>{const h=(y(a,r,{_f:{}})._f||{}).ref;k(s.errors,r,{...n,ref:h}),x.state.next({name:r,errors:s.errors,isValid:!1}),o&&o.shouldFocus&&h&&h.focus&&h.focus()},Tt=(r,n)=>Y(r)?x.values.subscribe({next:o=>r(C(void 0,n),o)}):C(r,n,!0),Re=(r,n={})=>{for(const o of r?pe(r):p.mount)p.mount.delete(o),p.array.delete(o),n.keepValue||(L(a,o),L(d,o)),!n.keepError&&L(s.errors,o),!n.keepDirty&&L(s.dirtyFields,o),!n.keepTouched&&L(s.touchedFields,o),!t.shouldUnregister&&!n.keepDefaultValue&&L(l,o);x.values.next({values:{...d}}),x.state.next({...s,...n.keepDirty?{isDirty:F()}:{}}),!n.keepIsValid&&_()},Ke=({disabled:r,name:n,field:o,fields:h})=>{if(te(r)){const f=r?void 0:y(d,n,Ee(o?o._f:y(h,n)._f));k(d,n,f),re(n,f,!1,!1,!0)}},Ae=(r,n={})=>{let o=y(a,r);const h=te(n.disabled);return k(a,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...n}}),p.mount.add(r),o?Ke({field:o,disabled:n.disabled,name:r}):de(r,!0,n.value),{...h?{disabled:n.disabled}:{},...t.progressive?{required:!!n.required,min:he(n.min),max:he(n.max),minLength:he(n.minLength),maxLength:he(n.maxLength),pattern:he(n.pattern)}:{},name:r,onChange:fe,onBlur:fe,ref:f=>{if(f){Ae(r,n),o=y(a,r);const c=N(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=_s(c),D=o._f.refs||[];if(m?D.find(q=>q===c):c===o._f.ref)return;k(a,r,{_f:{...o._f,...m?{refs:[...D.filter(qe),c,...Array.isArray(y(l,r))?[{}]:[]],ref:{type:c.type,name:r}}:{ref:c}}}),de(r,!1,void 0,c)}else o=y(a,r,{}),o._f&&(o._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&!(Vt(p.array,r)&&b.action)&&p.unMount.add(r)}}},Je=()=>t.shouldFocusError&&Oe(a,r=>r&&y(s.errors,r),p.mount),Qe=(r,n)=>async o=>{o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let h=I(d);if(x.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:c}=await H();s.errors=f,h=c}else await K(a);L(s.errors,"root"),B(s.errors)?(x.state.next({errors:{}}),await r(h,o)):(n&&await n({...s.errors},o),Je(),setTimeout(Je)),x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(s.errors),submitCount:s.submitCount+1,errors:s.errors})},Lt=(r,n={})=>{y(a,r)&&(N(n.defaultValue)?ee(r,y(l,r)):(ee(r,n.defaultValue),k(l,r,n.defaultValue)),n.keepTouched||L(s.touchedFields,r),n.keepDirty||(L(s.dirtyFields,r),s.isDirty=n.defaultValue?F(r,y(l,r)):F()),n.keepError||(L(s.errors,r),V.isValid&&_()),x.state.next({...s}))},Xe=(r,n={})=>{const o=r?I(r):l,h=I(o),f=r&&!B(r)?h:l;if(n.keepDefaultValues||(l=o),!n.keepValues){if(n.keepDirtyValues||A)for(const c of p.mount)y(s.dirtyFields,c)?k(f,c,y(d,c)):ee(c,y(f,c));else{if(Ue&&N(r))for(const c of p.mount){const m=y(a,c);if(m&&m._f){const D=Array.isArray(m._f.refs)?m._f.refs[0]:m._f.ref;if(Ve(D)){const q=D.closest("form");if(q){q.reset();break}}}}a={}}d=e.shouldUnregister?n.keepDefaultValues?I(l):{}:I(f),x.array.next({values:{...f}}),x.values.next({values:{...f}})}p={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!b.mount&&i(),b.mount=!V.isValid||!!n.keepIsValid,b.watch=!!e.shouldUnregister,x.state.next({submitCount:n.keepSubmitCount?s.submitCount:0,isDirty:n.keepDirty?s.isDirty:!!(n.keepDefaultValues&&!se(r,l)),isSubmitted:n.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:n.keepDirtyValues?s.dirtyFields:n.keepDefaultValues&&r?Ne(l,r):{},touchedFields:n.keepTouched?s.touchedFields:{},errors:n.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Ye=(r,n)=>Xe(Y(r)?r(d):r,n);return{control:{register:Ae,unregister:Re,getFieldState:ze,handleSubmit:Qe,setError:Ge,_executeSchema:H,_getWatch:C,_getDirty:F,_updateValid:_,_removeUnmounted:j,_updateFieldArray:G,_updateDisabledField:Ke,_getFieldArray:M,_reset:Xe,_resetDefaultValues:()=>Y(t.defaultValues)&&t.defaultValues().then(r=>{Ye(r,t.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:r=>{s={...s,...r}},_subjects:x,_proxyFormState:V,get _fields(){return a},get _formValues(){return d},get _state(){return b},set _state(r){b=r},get _defaultValues(){return l},get _names(){return p},set _names(r){p=r},get _formState(){return s},set _formState(r){s=r},get _options(){return t},set _options(r){t={...t,...r}}},trigger:ye,register:Ae,handleSubmit:Qe,watch:Tt,setValue:ee,getValues:We,reset:Ye,resetField:Lt,clearErrors:Et,unregister:Re,setError:Ge,setFocus:(r,n={})=>{const o=y(a,r),h=o&&o._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),n.shouldSelect&&f.select())}},getFieldState:ze}}function As(e={}){const i=S.useRef(),t=S.useRef(),[s,a]=S.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...Rs(e,()=>a(d=>({...d}))),formState:s});const l=i.current.control;return l._options=e,Pe({subject:l._subjects.state,next:d=>{wt(d,l._proxyFormState,l._updateFormState,!0)&&a({...l._formState})}}),S.useEffect(()=>{e.values&&!se(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values):l._resetDefaultValues()},[e.values,l]),S.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),i.current.formState=Ft(s,l),i.current}const Ds=({cars:e})=>{const i=dt(us),t=yt(),s=ts(e),a=ns(e,"make"),{register:l,handleSubmit:d,control:b,reset:p,formState:{errors:v}}=As({mode:"onChange"});oe.useEffect(()=>{p(i)},[i,p]);const w=x=>{t(ss(x))},V=()=>{t(rs()),p({brand:"",price:"",from:"",to:""})};return u.jsx("form",{onSubmit:d(w),className:"form flex-wrap",children:u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[u.jsxs("div",{className:"form mb-2 flex-wrap items-center gap-3",children:[u.jsxs("div",{className:"select-wrapper mb-2",children:[u.jsx("label",{htmlFor:"brand",className:"select-label",children:"Car brand"}),u.jsx(tt,{name:"brand",control:b,rules:{required:!0,message:"Brand is required"},render:({field:x})=>u.jsxs(u.Fragment,{children:[u.jsxs("select",{...x,className:"select-brand",children:[u.jsx("option",{value:"",className:"select-placeholder",children:"Enter the text"}),a&&a.map((A,R)=>u.jsx("option",{value:A,className:"select-text",children:A},R))]}),v.brand&&u.jsx("p",{className:"error",children:v.brand.type==="required"?"Brand is required":v.brand.message})]})})]}),u.jsxs("div",{className:"select-wrapper mb-2",children:[u.jsx("label",{htmlFor:"price",className:"select-label",children:"Price/ 1 hour"}),u.jsx("div",{children:u.jsx(tt,{name:"price",control:b,rules:{required:!0,min:{value:0,message:"Must be 0 or greater"}},render:({field:x})=>u.jsxs(u.Fragment,{children:[u.jsxs("select",{...x,className:"select-price",children:[u.jsx("option",{value:"",className:"select-placeholder",children:"To $"}),s&&s.map((A,R)=>u.jsx("option",{value:A,className:"select-text",children:A},R))]}),v.price&&u.jsx("p",{className:"error",children:v.price.type==="required"?"Price is required":v.price.message})]})})})]}),u.jsxs("div",{className:"select-wrapper mb-2",children:[u.jsx("label",{htmlFor:"minMileage",className:"select-label",children:"Car mileage / km (from)"}),u.jsxs("div",{className:"flex",children:[u.jsx("input",{type:"number",placeholder:"From",className:"select-placeholder select-from",...l("from",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"}})}),u.jsx("input",{type:"number",placeholder:"To",className:"select-placeholder select-to",...l("to",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"},validate:(x,{from:A})=>parseInt(x)>parseInt(A)?!0:"To must be greater than From"})}),u.jsxs("p",{className:"error flex items-center justify-between gap-1",children:[(v==null?void 0:v.from)&&u.jsx("span",{children:v.from.message}),(v==null?void 0:v.to)&&u.jsx("span",{children:v.to.message})]})]})]})]}),u.jsxs("div",{className:"-mt-6 mb-2 flex flex-wrap items-center justify-center gap-3",children:[u.jsx(me,{type:"submit",className:"button-search",label:"Search"}),u.jsx(me,{type:"button",className:"button-search",onClick:V,label:"Reset"})]})]})})};Ds.propTypes={cars:g.array.isRequired};export{cs as C,Ds as F,Me as T,us as a,os as b,ns as c,Es as s,yt as u};
