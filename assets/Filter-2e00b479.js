import{k as ve,l as Bt,m as Pt,r as oe,P as g,j as u,n as It,o as $t,B as me,p as Ht,q as Wt,t as zt,v as Gt,T as ct,w as Te,x as Kt,y as Jt,i as Qt,u as dt,z as Xt,A as Yt,D as Zt,E as es,R as S,F as ts,s as ss,G as rs}from"./index-959af674.js";function ft(e=ve){const i=e===ve?Bt:Pt(e);return function(){const{store:s}=i();return s}}const is=ft();function as(e=ve){const i=e===ve?is:ft(e);return function(){return i().dispatch}}const yt=as(),ht="/rent-cars-react/assets/car-8d70796c.jpg",ns=(e,i)=>{const[t,s]=oe.useState([]);return oe.useEffect(()=>{if(!i)return;const a=[...new Set(e.map(l=>l[i]))];s(a)},[e,i]),t},Me=({src:e,alt:i,className:t,blockClass:s,width:a,height:l})=>u.jsx("div",{className:s?`mb-[14px] max-w-full overflow-hidden rounded-[14px] ${s}`:"thumb mb-[14px] max-w-full overflow-hidden rounded-[14px]",children:u.jsx("img",{src:e?`${e}`:ht,alt:i,className:t?`block h-auto max-w-full object-cover object-center ${t}`:"block h-auto max-w-full  object-cover object-center",width:a,height:l,loading:"lazy"})});Me.propTypes={src:g.string.isRequired,alt:g.string.isRequired,className:g.string,blockClass:g.string,width:g.string.isRequired,height:g.string};const ls=document.getElementById("modal"),mt=({onClose:e,children:i,isOpen:t})=>{oe.useEffect(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="visible"},[t]);const s=oe.useCallback(a=>{document.body.style.overflow="visible",It(a,e)},[e]);return oe.useEffect(()=>(document.body.addEventListener("keydown",s),()=>document.body.removeEventListener("keydown",s)),[s]),$t.createPortal(u.jsx("div",{className:"backdrop",onClick:s,children:u.jsxs("div",{className:"modal max-w-full dark:bg-slate-700",children:[u.jsx(me,{onClick:e,className:"close",type:"button",iconURL:"#icon-close",ariaLabel:"close icon"}),i]})}),ls)};mt.propTypes={children:g.node.isRequired,onClose:g.func.isRequired,isOpen:g.bool};const ue=()=>u.jsx("span",{className:"vector dark:text-white/50",children:"|"}),ne=({conditionText:e,conditionValue:i})=>u.jsxs("li",{className:"modal-btn-cond dark:bg-slate-600",children:[u.jsx("p",{className:"cond dark:text-white/50",children:e}),i&&u.jsx("span",{className:"modal-accent-cond",children:i})]});ne.propTypes={conditionText:g.string.isRequired,conditionValue:g.string};const gt=({rentConditions:e,mile:i,price:t,title:s})=>u.jsxs("div",{className:"mb-[24px] ",children:[u.jsxs("p",{className:"modal-second-title dark:text-white",children:[s,":"]}),u.jsxs("ul",{className:"modal-cond-block gap-3",children:[u.jsx(ne,{conditionText:e[0],conditionValue:e[1]}),u.jsx(ne,{conditionText:e[2]}),u.jsx(ne,{conditionText:e[3]}),u.jsx(ne,{conditionText:"Mileage: ",conditionValue:i}),u.jsx(ne,{conditionText:"Price: ",conditionValue:`${t}$`})]})]});gt.propTypes={rentConditions:g.array.isRequired,mile:g.string.isRequired,price:g.string.isRequired,title:g.string.isRequired};const Le=({items:e,separator:i})=>u.jsx("ul",{className:"mb-[4px] flex flex-wrap items-center justify-start",children:e.map((t,s)=>u.jsxs("li",{className:"text-description dark:text-white/50",children:[t,s<e.length-1&&i]},s))});Le.propTypes={items:g.array.isRequired,separator:g.any};const xt=({accessories:e,functionalities:i,title:t})=>u.jsxs("div",{className:"mb-[24px]",children:[u.jsxs("p",{className:"modal-second-title dark:text-white",children:[t,":"]}),u.jsx(Le,{items:e,separator:u.jsx(ue,{})}),u.jsx(Le,{items:i,separator:u.jsx(ue,{})})]});xt.propTypes={accessories:g.array.isRequired,functionalities:g.array.isRequired,title:g.string.isRequired};const pt=({car:e})=>{const{year:i,make:t,model:s,img:a,rentalPrice:l,address:d,description:v,accessories:x,functionalities:w,rentalConditions:b,mileage:V}=e,p=Kt(e),A=Ht(d,e),k=Wt(b),U=zt(V),X=Gt(l);return u.jsxs(u.Fragment,{children:[u.jsx(Me,{width:"461",height:"248",src:a,alt:`${t} ${s}`,className:"modal-car",blockClass:"w-[461px] h-[248px]"}),u.jsxs(ct,{className:"modal-title",children:[t," ",u.jsx("span",{className:"modal-accent-title",children:s}),", ",i]}),u.jsxs("div",{className:"mb-[14px] gap-[4px]",children:[u.jsx("ul",{className:"modal-description mb-[4px] flex items-center justify-start",children:Te(A,u.jsx(ue,{}))}),u.jsx("ul",{className:"modal-description flex items-center justify-start",children:Te(p,u.jsx(ue,{}))})]}),u.jsx("div",{className:"modal-accent-descr dark:text-white",children:v}),u.jsx(xt,{title:"Accessories and functionalities",accessories:x,functionalities:w}),u.jsx(gt,{title:"Rental Conditions",rentConditions:k,mile:U,price:X}),u.jsx("a",{href:"tel:+380730000000",className:"modal-btn-link",children:"Rental car"})]})};pt.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired,accessories:g.array.isRequired,rentalConditions:g.string.isRequired}).isRequired};const Es=e=>e.cars.items,os=e=>e.cars.favorites,us=e=>e.cars.filter,bt=({locationData:e,carData:i})=>u.jsxs(u.Fragment,{children:[u.jsx("ul",{className:"card-info-block flex-wrap dark:text-white/50",children:Te(e,u.jsx(ue,{}))}),u.jsx("ul",{className:"card-info-block mb-[28px] dark:text-white/50",children:Object.entries(i).map(([t,s],a,l)=>u.jsxs("li",{className:"text-description dark:text-white/50",children:[Jt(t,s),a<l.length-1&&u.jsx(ue,{})]},a))})]});bt.propTypes={carData:g.object.isRequired,locationData:g.array.isRequired};const cs=({car:e})=>{const{isOpen:i,open:t,close:s}=Qt(!1),a=dt(os),l=yt(),{id:d,year:v,make:x,model:w,img:b,rentalPrice:V,address:p}=e,A=Yt(e),k=Xt(p,e),U=a==null?void 0:a.some(ce=>ce.id===d),X=()=>l(U?Zt(e):es(e));return u.jsx(u.Fragment,{children:u.jsxs("li",{className:"card flex-auto",children:[u.jsx(me,{type:"button",iconURL:"#icon-heart",ariaLabel:"heart icon",onClick:X,className:`heart ${U?"favorite":""}`}),u.jsx(Me,{className:"card-image",src:b||ht,alt:`${x} ${w}`,width:"274",height:"426"}),u.jsxs(ct,{children:[u.jsxs("span",{className:"truncate hover:text-clip dark:text-white",children:[x,u.jsx("span",{className:"title-accent ml-1",children:w}),", ",v]}),u.jsx("span",{className:"dark:text-white",children:V})]}),u.jsx(bt,{locationData:k,carData:A}),u.jsx(me,{label:"Learn more",className:"card-big-button",onClick:t}),i&&u.jsx(mt,{isOpen:i,onClose:s,children:u.jsx(pt,{car:e})})]})})};cs.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired}).isRequired,fav:g.bool};var ge=e=>e.type==="checkbox",le=e=>e instanceof Date,O=e=>e==null;const vt=e=>typeof e=="object";var E=e=>!O(e)&&!Array.isArray(e)&&vt(e)&&!le(e),_t=e=>E(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,ds=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Vt=(e,i)=>e.has(ds(i)),fs=e=>{const i=e.constructor&&e.constructor.prototype;return E(i)&&i.hasOwnProperty("isPrototypeOf")},Ue=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $(e){let i;const t=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Ue&&(e instanceof Blob||e instanceof FileList))&&(t||E(e)))if(i=t?[]:{},!t&&!fs(e))i=e;else for(const s in e)e.hasOwnProperty(s)&&(i[s]=$(e[s]));else return e;return i}var xe=e=>Array.isArray(e)?e.filter(Boolean):[],N=e=>e===void 0,y=(e,i,t)=>{if(!i||!E(e))return t;const s=xe(i.split(/[,[\].]+?/)).reduce((a,l)=>O(a)?a:a[l],e);return N(s)||s===e?N(e[i])?t:e[i]:s};const _e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},H={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Q={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ys=S.createContext(null),Be=()=>S.useContext(ys);var Ft=(e,i,t,s=!0)=>{const a={defaultValues:i._defaultValues};for(const l in e)Object.defineProperty(a,l,{get:()=>{const d=l;return i._proxyFormState[d]!==H.all&&(i._proxyFormState[d]=!s||H.all),t&&(t[d]=!0),e[d]}});return a},P=e=>E(e)&&!Object.keys(e).length,wt=(e,i,t,s)=>{t(e);const{name:a,...l}=e;return P(l)||Object.keys(l).length>=Object.keys(i).length||Object.keys(l).find(d=>i[d]===(!s||H.all))},pe=e=>Array.isArray(e)?e:[e],jt=(e,i,t)=>t&&i?e===i||Array.isArray(e)&&e.some(s=>s&&t&&s===i):!e||!i||e===i||pe(e).some(s=>s&&(s.startsWith(i)||i.startsWith(s)));function Pe(e){const i=S.useRef(e);i.current=e,S.useEffect(()=>{const t=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function hs(e){const i=Be(),{control:t=i.control,disabled:s,name:a,exact:l}=e||{},[d,v]=S.useState(t._formState),x=S.useRef(!0),w=S.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),b=S.useRef(a);return b.current=a,Pe({disabled:s,next:V=>x.current&&jt(b.current,V.name,l)&&wt(V,w.current,t._updateFormState)&&v({...t._formState,...V}),subject:t._subjects.state}),S.useEffect(()=>(x.current=!0,w.current.isValid&&t._updateValid(!0),()=>{x.current=!1}),[t]),Ft(d,t,w.current,!1)}var G=e=>typeof e=="string",kt=(e,i,t,s,a)=>G(e)?(s&&i.watch.add(e),y(t,e,a)):Array.isArray(e)?e.map(l=>(s&&i.watch.add(l),y(t,l))):(s&&(i.watchAll=!0),t);function ms(e){const i=Be(),{control:t=i.control,name:s,defaultValue:a,disabled:l,exact:d}=e||{},v=S.useRef(s);v.current=s,Pe({disabled:l,subject:t._subjects.values,next:b=>{jt(v.current,b.name,d)&&w($(kt(v.current,t._names,b.values||t._formValues,!1,a)))}});const[x,w]=S.useState(t._getWatch(s,a));return S.useEffect(()=>t._removeUnmounted()),x}var Ie=e=>/^\w*$/.test(e),Rt=e=>xe(e.replace(/["|']|\]/g,"").split(/\.|\[/));function R(e,i,t){let s=-1;const a=Ie(i)?[i]:Rt(i),l=a.length,d=l-1;for(;++s<l;){const v=a[s];let x=t;if(s!==d){const w=e[v];x=E(w)||Array.isArray(w)?w:isNaN(+a[s+1])?{}:[]}e[v]=x,e=e[v]}return e}function gs(e){const i=Be(),{name:t,disabled:s,control:a=i.control,shouldUnregister:l}=e,d=Vt(a._names.array,t),v=ms({control:a,name:t,defaultValue:y(a._formValues,t,y(a._defaultValues,t,e.defaultValue)),exact:!0}),x=hs({control:a,name:t}),w=S.useRef(a.register(t,{...e.rules,value:v}));return w.current=a.register(t,e.rules),S.useEffect(()=>{const b=a._options.shouldUnregister||l,V=(p,A)=>{const k=y(a._fields,p);k&&(k._f.mount=A)};if(V(t,!0),b){const p=$(y(a._options.defaultValues,t));R(a._defaultValues,t,p),N(y(a._formValues,t))&&R(a._formValues,t,p)}return()=>{(d?b&&!a._state.action:b)?a.unregister(t):V(t,!1)}},[t,a,d,l]),S.useEffect(()=>{a._updateDisabledField({disabled:s,fields:a._fields,name:t})},[s,t,a]),{field:{name:t,value:v,disabled:s,onChange:S.useCallback(b=>w.current.onChange({target:{value:_t(b),name:t},type:_e.CHANGE}),[t]),onBlur:S.useCallback(()=>w.current.onBlur({target:{value:y(a._formValues,t),name:t},type:_e.BLUR}),[t,a]),ref:b=>{const V=y(a._fields,t);V&&b&&(V._f.ref={focus:()=>b.focus(),select:()=>b.select(),setCustomValidity:p=>b.setCustomValidity(p),reportValidity:()=>b.reportValidity()})}},formState:x,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(x.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(x.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(x.touchedFields,t)},error:{enumerable:!0,get:()=>y(x.errors,t)}})}}const tt=e=>e.render(gs(e));var xs=(e,i,t,s,a)=>i?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:a||!0}}:{};const Oe=(e,i,t)=>{for(const s of t||Object.keys(e)){const a=y(e,s);if(a){const{_f:l,...d}=a;if(l&&i(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else E(d)&&Oe(d,i)}}};var st=e=>({isOnSubmit:!e||e===H.onSubmit,isOnBlur:e===H.onBlur,isOnChange:e===H.onChange,isOnAll:e===H.all,isOnTouch:e===H.onTouched}),rt=(e,i,t)=>!t&&(i.watchAll||i.watch.has(e)||[...i.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length)))),ps=(e,i,t)=>{const s=xe(y(e,t));return R(s,"root",i[t]),R(e,t,s),e},te=e=>typeof e=="boolean",$e=e=>e.type==="file",Y=e=>typeof e=="function",Ve=e=>{if(!Ue)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},be=e=>G(e),He=e=>e.type==="radio",Fe=e=>e instanceof RegExp;const it={value:!1,isValid:!1},at={value:!0,isValid:!0};var At=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!N(e[0].attributes.value)?N(e[0].value)||e[0].value===""?at:{value:e[0].value,isValid:!0}:at:it}return it};const nt={isValid:!1,value:null};var Dt=e=>Array.isArray(e)?e.reduce((i,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:i,nt):nt;function lt(e,i,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||te(e)&&!e)return{type:t,message:be(e)?e:"",ref:i}}var ae=e=>E(e)&&!Fe(e)?e:{value:e,message:""},ot=async(e,i,t,s,a)=>{const{ref:l,refs:d,required:v,maxLength:x,minLength:w,min:b,max:V,pattern:p,validate:A,name:k,valueAsNumber:U,mount:X,disabled:ce}=e._f,_=y(i,k);if(!X||ce)return{};const I=d?d[0]:l,K=j=>{s&&I.reportValidity&&(I.setCustomValidity(te(j)?"":j||""),I.reportValidity())},T={},de=He(l),re=ge(l),ke=de||re,W=(U||$e(l))&&N(l.value)&&N(_)||Ve(l)&&l.value===""||_===""||Array.isArray(_)&&!_.length,Z=xs.bind(null,k,t,T),J=(j,F,C,M=Q.maxLength,B=Q.minLength)=>{const z=j?F:C;T[k]={type:j?M:B,message:z,ref:l,...Z(j?M:B,z)}};if(a?!Array.isArray(_)||!_.length:v&&(!ke&&(W||O(_))||te(_)&&!_||re&&!At(d).isValid||de&&!Dt(d).isValid)){const{value:j,message:F}=be(v)?{value:!!v,message:v}:ae(v);if(j&&(T[k]={type:Q.required,message:F,ref:I,...Z(Q.required,F)},!t))return K(F),T}if(!W&&(!O(b)||!O(V))){let j,F;const C=ae(V),M=ae(b);if(!O(_)&&!isNaN(_)){const B=l.valueAsNumber||_&&+_;O(C.value)||(j=B>C.value),O(M.value)||(F=B<M.value)}else{const B=l.valueAsDate||new Date(_),z=ye=>new Date(new Date().toDateString()+" "+ye),ee=l.type=="time",fe=l.type=="week";G(C.value)&&_&&(j=ee?z(_)>z(C.value):fe?_>C.value:B>new Date(C.value)),G(M.value)&&_&&(F=ee?z(_)<z(M.value):fe?_<M.value:B<new Date(M.value))}if((j||F)&&(J(!!j,C.message,M.message,Q.max,Q.min),!t))return K(T[k].message),T}if((x||w)&&!W&&(G(_)||a&&Array.isArray(_))){const j=ae(x),F=ae(w),C=!O(j.value)&&_.length>+j.value,M=!O(F.value)&&_.length<+F.value;if((C||M)&&(J(C,j.message,F.message),!t))return K(T[k].message),T}if(p&&!W&&G(_)){const{value:j,message:F}=ae(p);if(Fe(j)&&!_.match(j)&&(T[k]={type:Q.pattern,message:F,ref:l,...Z(Q.pattern,F)},!t))return K(F),T}if(A){if(Y(A)){const j=await A(_,i),F=lt(j,I);if(F&&(T[k]={...F,...Z(Q.validate,F.message)},!t))return K(F.message),T}else if(E(A)){let j={};for(const F in A){if(!P(j)&&!t)break;const C=lt(await A[F](_,i),I,F);C&&(j={...C,...Z(F,C.message)},K(C.message),t&&(T[k]=j))}if(!P(j)&&(T[k]={ref:I,...j},!t))return T}}return K(!0),T};function bs(e,i){const t=i.slice(0,-1).length;let s=0;for(;s<t;)e=N(e)?s++:e[i[s++]];return e}function vs(e){for(const i in e)if(e.hasOwnProperty(i)&&!N(e[i]))return!1;return!0}function L(e,i){const t=Array.isArray(i)?i:Ie(i)?[i]:Rt(i),s=t.length===1?e:bs(e,t),a=t.length-1,l=t[a];return s&&delete s[l],a!==0&&(E(s)&&P(s)||Array.isArray(s)&&vs(s))&&L(e,t.slice(0,-1)),e}function Ce(){let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next&&l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}}var we=e=>O(e)||!vt(e);function se(e,i){if(we(e)||we(i))return e===i;if(le(e)&&le(i))return e.getTime()===i.getTime();const t=Object.keys(e),s=Object.keys(i);if(t.length!==s.length)return!1;for(const a of t){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const d=i[a];if(le(l)&&le(d)||E(l)&&E(d)||Array.isArray(l)&&Array.isArray(d)?!se(l,d):l!==d)return!1}}return!0}var St=e=>e.type==="select-multiple",_s=e=>He(e)||ge(e),qe=e=>Ve(e)&&e.isConnected,Ct=e=>{for(const i in e)if(Y(e[i]))return!0;return!1};function je(e,i={}){const t=Array.isArray(e);if(E(e)||t)for(const s in e)Array.isArray(e[s])||E(e[s])&&!Ct(e[s])?(i[s]=Array.isArray(e[s])?[]:{},je(e[s],i[s])):O(e[s])||(i[s]=!0);return i}function qt(e,i,t){const s=Array.isArray(e);if(E(e)||s)for(const a in e)Array.isArray(e[a])||E(e[a])&&!Ct(e[a])?N(i)||we(t[a])?t[a]=Array.isArray(e[a])?je(e[a],[]):{...je(e[a])}:qt(e[a],O(i)?{}:i[a],t[a]):t[a]=!se(e[a],i[a]);return t}var Ne=(e,i)=>qt(e,i,je(i)),Nt=(e,{valueAsNumber:i,valueAsDate:t,setValueAs:s})=>N(e)?e:i?e===""?NaN:e&&+e:t&&G(e)?new Date(e):s?s(e):e;function Ee(e){const i=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):i.disabled))return $e(i)?i.files:He(i)?Dt(e.refs).value:St(i)?[...i.selectedOptions].map(({value:t})=>t):ge(i)?At(e.refs).value:Nt(N(i.value)?e.ref.value:i.value,e)}var Vs=(e,i,t,s)=>{const a={};for(const l of e){const d=y(i,l);d&&R(a,l,d._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:s}},he=e=>N(e)?e:Fe(e)?e.source:E(e)?Fe(e.value)?e.value.source:e.value:e,Fs=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ut(e,i,t){const s=y(e,t);if(s||Ie(t))return{error:s,name:t};const a=t.split(".");for(;a.length;){const l=a.join("."),d=y(i,l),v=y(e,l);if(d&&!Array.isArray(d)&&t!==l)return{name:t};if(v&&v.type)return{name:l,error:v};a.pop()}return{name:t}}var ws=(e,i,t,s,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(i||e):(t?s.isOnBlur:a.isOnBlur)?!e:(t?s.isOnChange:a.isOnChange)?e:!0,js=(e,i)=>!xe(y(e,i)).length&&L(e,i);const ks={mode:H.onSubmit,reValidateMode:H.onChange,shouldFocusError:!0};function Rs(e={},i){let t={...ks,...e},s={submitCount:0,isDirty:!1,isLoading:Y(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},a={},l=E(t.defaultValues)||E(t.values)?$(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:$(l),v={action:!1,mount:!1,watch:!1},x={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,b=0;const V={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={values:Ce(),array:Ce(),state:Ce()},A=e.resetOptions&&e.resetOptions.keepDirtyValues,k=st(t.mode),U=st(t.reValidateMode),X=t.criteriaMode===H.all,ce=r=>n=>{clearTimeout(b),b=setTimeout(r,n)},_=async r=>{if(V.isValid||r){const n=t.resolver?P((await W()).errors):await J(a,!0);n!==s.isValid&&p.state.next({isValid:n})}},I=r=>V.isValidating&&p.state.next({isValidating:r}),K=(r,n=[],o,h,f=!0,c=!0)=>{if(h&&o){if(v.action=!0,c&&Array.isArray(y(a,r))){const m=o(y(a,r),h.argA,h.argB);f&&R(a,r,m)}if(c&&Array.isArray(y(s.errors,r))){const m=o(y(s.errors,r),h.argA,h.argB);f&&R(s.errors,r,m),js(s.errors,r)}if(V.touchedFields&&c&&Array.isArray(y(s.touchedFields,r))){const m=o(y(s.touchedFields,r),h.argA,h.argB);f&&R(s.touchedFields,r,m)}V.dirtyFields&&(s.dirtyFields=Ne(l,d)),p.state.next({name:r,isDirty:F(r,n),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else R(d,r,n)},T=(r,n)=>{R(s.errors,r,n),p.state.next({errors:s.errors})},de=(r,n,o,h)=>{const f=y(a,r);if(f){const c=y(d,r,N(o)?y(l,r):o);N(c)||h&&h.defaultChecked||n?R(d,r,n?c:Ee(f._f)):B(r,c),v.mount&&_()}},re=(r,n,o,h,f)=>{let c=!1,m=!1;const D={name:r};if(!o||h){V.isDirty&&(m=s.isDirty,s.isDirty=D.isDirty=F(),c=m!==D.isDirty);const q=se(y(l,r),n);m=y(s.dirtyFields,r),q?L(s.dirtyFields,r):R(s.dirtyFields,r,!0),D.dirtyFields=s.dirtyFields,c=c||V.dirtyFields&&m!==!q}if(o){const q=y(s.touchedFields,r);q||(R(s.touchedFields,r,o),D.touchedFields=s.touchedFields,c=c||V.touchedFields&&q!==o)}return c&&f&&p.state.next(D),c?D:{}},ke=(r,n,o,h)=>{const f=y(s.errors,r),c=V.isValid&&te(n)&&s.isValid!==n;if(e.delayError&&o?(w=ce(()=>T(r,o)),w(e.delayError)):(clearTimeout(b),w=null,o?R(s.errors,r,o):L(s.errors,r)),(o?!se(f,o):f)||!P(h)||c){const m={...h,...c&&te(n)?{isValid:n}:{},errors:s.errors,name:r};s={...s,...m},p.state.next(m)}I(!1)},W=async r=>t.resolver(d,t.context,Vs(r||x.mount,a,t.criteriaMode,t.shouldUseNativeValidation)),Z=async r=>{const{errors:n}=await W(r);if(r)for(const o of r){const h=y(n,o);h?R(s.errors,o,h):L(s.errors,o)}else s.errors=n;return n},J=async(r,n,o={valid:!0})=>{for(const h in r){const f=r[h];if(f){const{_f:c,...m}=f;if(c){const D=x.array.has(c.name),q=await ot(f,d,X,t.shouldUseNativeValidation&&!n,D);if(q[c.name]&&(o.valid=!1,n))break;!n&&(y(q,c.name)?D?ps(s.errors,q,c.name):R(s.errors,c.name,q[c.name]):L(s.errors,c.name))}m&&await J(m,n,o)}}return o.valid},j=()=>{for(const r of x.unMount){const n=y(a,r);n&&(n._f.refs?n._f.refs.every(o=>!qe(o)):!qe(n._f.ref))&&Re(r)}x.unMount=new Set},F=(r,n)=>(r&&n&&R(d,r,n),!se(We(),l)),C=(r,n,o)=>kt(r,x,{...v.mount?d:N(n)?l:G(r)?{[r]:n}:n},o,n),M=r=>xe(y(v.mount?d:l,r,e.shouldUnregister?y(l,r,[]):[])),B=(r,n,o={})=>{const h=y(a,r);let f=n;if(h){const c=h._f;c&&(!c.disabled&&R(d,r,Nt(n,c)),f=Ve(c.ref)&&O(n)?"":n,St(c.ref)?[...c.ref.options].forEach(m=>m.selected=f.includes(m.value)):c.refs?ge(c.ref)?c.refs.length>1?c.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(f)?!!f.find(D=>D===m.value):f===m.value)):c.refs[0]&&(c.refs[0].checked=!!f):c.refs.forEach(m=>m.checked=m.value===f):$e(c.ref)?c.ref.value="":(c.ref.value=f,c.ref.type||p.values.next({name:r,values:{...d}})))}(o.shouldDirty||o.shouldTouch)&&re(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&ye(r)},z=(r,n,o)=>{for(const h in n){const f=n[h],c=`${r}.${h}`,m=y(a,c);(x.array.has(r)||!we(f)||m&&!m._f)&&!le(f)?z(c,f,o):B(c,f,o)}},ee=(r,n,o={})=>{const h=y(a,r),f=x.array.has(r),c=$(n);R(d,r,c),f?(p.array.next({name:r,values:{...d}}),(V.isDirty||V.dirtyFields)&&o.shouldDirty&&p.state.next({name:r,dirtyFields:Ne(l,d),isDirty:F(r,c)})):h&&!h._f&&!O(c)?z(r,c,o):B(r,c,o),rt(r,x)&&p.state.next({...s}),p.values.next({name:r,values:{...d}}),!v.mount&&i()},fe=async r=>{const n=r.target;let o=n.name,h=!0;const f=y(a,o),c=()=>n.type?Ee(f._f):_t(r);if(f){let m,D;const q=c(),ie=r.type===_e.BLUR||r.type===_e.FOCUS_OUT,Ot=!Fs(f._f)&&!t.resolver&&!y(s.errors,o)&&!f._f.deps||ws(ie,y(s.touchedFields,o),s.isSubmitted,U,k),De=rt(o,x,ie);R(d,o,q),ie?(f._f.onBlur&&f._f.onBlur(r),w&&w(0)):f._f.onChange&&f._f.onChange(r);const Se=re(o,q,ie,!1),Mt=!P(Se)||De;if(!ie&&p.values.next({name:o,type:r.type,values:{...d}}),Ot)return V.isValid&&_(),Mt&&p.state.next({name:o,...De?{}:Se});if(!ie&&De&&p.state.next({...s}),I(!0),t.resolver){const{errors:Ze}=await W([o]),Ut=ut(s.errors,a,o),et=ut(Ze,a,Ut.name||o);m=et.error,o=et.name,D=P(Ze)}else m=(await ot(f,d,X,t.shouldUseNativeValidation))[o],h=isNaN(q)||q===y(d,o,q),h&&(m?D=!1:V.isValid&&(D=await J(a,!0)));h&&(f._f.deps&&ye(f._f.deps),ke(o,D,m,Se))}},ye=async(r,n={})=>{let o,h;const f=pe(r);if(I(!0),t.resolver){const c=await Z(N(r)?r:f);o=P(c),h=r?!f.some(m=>y(c,m)):o}else r?(h=(await Promise.all(f.map(async c=>{const m=y(a,c);return await J(m&&m._f?{[c]:m}:m)}))).every(Boolean),!(!h&&!s.isValid)&&_()):h=o=await J(a);return p.state.next({...!G(r)||V.isValid&&o!==s.isValid?{}:{name:r},...t.resolver||!r?{isValid:o}:{},errors:s.errors,isValidating:!1}),n.shouldFocus&&!h&&Oe(a,c=>c&&y(s.errors,c),r?f:x.mount),h},We=r=>{const n={...l,...v.mount?d:{}};return N(r)?n:G(r)?y(n,r):r.map(o=>y(n,o))},ze=(r,n)=>({invalid:!!y((n||s).errors,r),isDirty:!!y((n||s).dirtyFields,r),isTouched:!!y((n||s).touchedFields,r),error:y((n||s).errors,r)}),Et=r=>{r&&pe(r).forEach(n=>L(s.errors,n)),p.state.next({errors:r?s.errors:{}})},Ge=(r,n,o)=>{const h=(y(a,r,{_f:{}})._f||{}).ref;R(s.errors,r,{...n,ref:h}),p.state.next({name:r,errors:s.errors,isValid:!1}),o&&o.shouldFocus&&h&&h.focus&&h.focus()},Tt=(r,n)=>Y(r)?p.values.subscribe({next:o=>r(C(void 0,n),o)}):C(r,n,!0),Re=(r,n={})=>{for(const o of r?pe(r):x.mount)x.mount.delete(o),x.array.delete(o),n.keepValue||(L(a,o),L(d,o)),!n.keepError&&L(s.errors,o),!n.keepDirty&&L(s.dirtyFields,o),!n.keepTouched&&L(s.touchedFields,o),!t.shouldUnregister&&!n.keepDefaultValue&&L(l,o);p.values.next({values:{...d}}),p.state.next({...s,...n.keepDirty?{isDirty:F()}:{}}),!n.keepIsValid&&_()},Ke=({disabled:r,name:n,field:o,fields:h})=>{if(te(r)){const f=r?void 0:y(d,n,Ee(o?o._f:y(h,n)._f));R(d,n,f),re(n,f,!1,!1,!0)}},Ae=(r,n={})=>{let o=y(a,r);const h=te(n.disabled);return R(a,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...n}}),x.mount.add(r),o?Ke({field:o,disabled:n.disabled,name:r}):de(r,!0,n.value),{...h?{disabled:n.disabled}:{},...t.progressive?{required:!!n.required,min:he(n.min),max:he(n.max),minLength:he(n.minLength),maxLength:he(n.maxLength),pattern:he(n.pattern)}:{},name:r,onChange:fe,onBlur:fe,ref:f=>{if(f){Ae(r,n),o=y(a,r);const c=N(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=_s(c),D=o._f.refs||[];if(m?D.find(q=>q===c):c===o._f.ref)return;R(a,r,{_f:{...o._f,...m?{refs:[...D.filter(qe),c,...Array.isArray(y(l,r))?[{}]:[]],ref:{type:c.type,name:r}}:{ref:c}}}),de(r,!1,void 0,c)}else o=y(a,r,{}),o._f&&(o._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&!(Vt(x.array,r)&&v.action)&&x.unMount.add(r)}}},Je=()=>t.shouldFocusError&&Oe(a,r=>r&&y(s.errors,r),x.mount),Qe=(r,n)=>async o=>{o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let h=$(d);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:c}=await W();s.errors=f,h=c}else await J(a);L(s.errors,"root"),P(s.errors)?(p.state.next({errors:{}}),await r(h,o)):(n&&await n({...s.errors},o),Je(),setTimeout(Je)),p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:P(s.errors),submitCount:s.submitCount+1,errors:s.errors})},Lt=(r,n={})=>{y(a,r)&&(N(n.defaultValue)?ee(r,y(l,r)):(ee(r,n.defaultValue),R(l,r,n.defaultValue)),n.keepTouched||L(s.touchedFields,r),n.keepDirty||(L(s.dirtyFields,r),s.isDirty=n.defaultValue?F(r,y(l,r)):F()),n.keepError||(L(s.errors,r),V.isValid&&_()),p.state.next({...s}))},Xe=(r,n={})=>{const o=r?$(r):l,h=$(o),f=r&&!P(r)?h:l;if(n.keepDefaultValues||(l=o),!n.keepValues){if(n.keepDirtyValues||A)for(const c of x.mount)y(s.dirtyFields,c)?R(f,c,y(d,c)):ee(c,y(f,c));else{if(Ue&&N(r))for(const c of x.mount){const m=y(a,c);if(m&&m._f){const D=Array.isArray(m._f.refs)?m._f.refs[0]:m._f.ref;if(Ve(D)){const q=D.closest("form");if(q){q.reset();break}}}}a={}}d=e.shouldUnregister?n.keepDefaultValues?$(l):{}:$(f),p.array.next({values:{...f}}),p.values.next({values:{...f}})}x={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!v.mount&&i(),v.mount=!V.isValid||!!n.keepIsValid,v.watch=!!e.shouldUnregister,p.state.next({submitCount:n.keepSubmitCount?s.submitCount:0,isDirty:n.keepDirty?s.isDirty:!!(n.keepDefaultValues&&!se(r,l)),isSubmitted:n.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:n.keepDirtyValues?s.dirtyFields:n.keepDefaultValues&&r?Ne(l,r):{},touchedFields:n.keepTouched?s.touchedFields:{},errors:n.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Ye=(r,n)=>Xe(Y(r)?r(d):r,n);return{control:{register:Ae,unregister:Re,getFieldState:ze,handleSubmit:Qe,setError:Ge,_executeSchema:W,_getWatch:C,_getDirty:F,_updateValid:_,_removeUnmounted:j,_updateFieldArray:K,_updateDisabledField:Ke,_getFieldArray:M,_reset:Xe,_resetDefaultValues:()=>Y(t.defaultValues)&&t.defaultValues().then(r=>{Ye(r,t.resetOptions),p.state.next({isLoading:!1})}),_updateFormState:r=>{s={...s,...r}},_subjects:p,_proxyFormState:V,get _fields(){return a},get _formValues(){return d},get _state(){return v},set _state(r){v=r},get _defaultValues(){return l},get _names(){return x},set _names(r){x=r},get _formState(){return s},set _formState(r){s=r},get _options(){return t},set _options(r){t={...t,...r}}},trigger:ye,register:Ae,handleSubmit:Qe,watch:Tt,setValue:ee,getValues:We,reset:Ye,resetField:Lt,clearErrors:Et,unregister:Re,setError:Ge,setFocus:(r,n={})=>{const o=y(a,r),h=o&&o._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),n.shouldSelect&&f.select())}},getFieldState:ze}}function As(e={}){const i=S.useRef(),t=S.useRef(),[s,a]=S.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...Rs(e,()=>a(d=>({...d}))),formState:s});const l=i.current.control;return l._options=e,Pe({subject:l._subjects.state,next:d=>{wt(d,l._proxyFormState,l._updateFormState,!0)&&a({...l._formState})}}),S.useEffect(()=>{e.values&&!se(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values):l._resetDefaultValues()},[e.values,l]),S.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),i.current.formState=Ft(s,l),i.current}const Ds=({cars:e})=>{const i=dt(us),t=yt(),s=ts(e),a=ns(e,"make"),l=(e==null?void 0:e.length)===0,{register:d,handleSubmit:v,control:x,reset:w,formState:{errors:b}}=As({mode:"onChange",shouldDisable:l});oe.useEffect(()=>{w(i)},[i,w]);const V=A=>{t(ss(A))},p=()=>{t(rs()),w({brand:"",price:"",from:"",to:""})};return u.jsx("form",{onSubmit:v(V),className:`form flex-wrap ${l?"pointer-events-none opacity-60":""}`,disabled:l,children:u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[u.jsxs("div",{className:"form mb-2 flex-wrap items-center gap-3",children:[u.jsxs("div",{className:"select-wrapper mb-2",children:[u.jsx("label",{htmlFor:"brand",className:"select-label",children:"Car brand"}),u.jsx(tt,{name:"brand",control:x,rules:{required:!0,message:"Brand is required"},render:({field:A})=>u.jsxs(u.Fragment,{children:[u.jsxs("select",{...A,className:"select-brand",children:[u.jsx("option",{value:"",className:"select-placeholder",children:"Enter the text"}),a&&a.map((k,U)=>u.jsx("option",{value:k,className:"select-text",children:k},U))]}),b.brand&&u.jsx("p",{className:`error ${l?"opacity-0":"opacity-100"}`,children:b.brand.type==="required"?"Brand is required":b.brand.message})]})})]}),u.jsxs("div",{className:"select-wrapper mb-2",children:[u.jsx("label",{htmlFor:"price",className:"select-label",children:"Price/ 1 hour"}),u.jsx("div",{children:u.jsx(tt,{name:"price",control:x,rules:{required:!0,min:{value:0,message:"Must be 0 or greater"}},render:({field:A})=>u.jsxs(u.Fragment,{children:[u.jsxs("select",{...A,className:"select-price",children:[u.jsx("option",{value:"",className:"select-placeholder",children:"To $"}),s&&s.map((k,U)=>u.jsx("option",{value:k,className:"select-text",children:k},U))]}),b.price&&u.jsx("p",{className:`error ${l?"opacity-0":"opacity-100"}`,children:b.price.type==="required"?"Price is required":b.price.message})]})})})]}),u.jsxs("div",{className:"select-wrapper mb-2",children:[u.jsx("label",{htmlFor:"minMileage",className:"select-label",children:"Car mileage / km (from)"}),u.jsxs("div",{className:"flex",children:[u.jsx("input",{type:"number",placeholder:"From",className:"select-placeholder select-from",...d("from",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"}})}),u.jsx("input",{type:"number",placeholder:"To",className:"select-placeholder select-to",...d("to",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"},validate:(A,{from:k})=>parseInt(A)>parseInt(k)?!0:"To must be greater than From"})}),u.jsxs("p",{className:`error flex items-center justify-between gap-1 ${l?"opacity-0":"opacity-100"}`,children:[(b==null?void 0:b.from)&&u.jsx("span",{children:b.from.message}),(b==null?void 0:b.to)&&u.jsx("span",{children:b.to.message})]})]})]})]}),u.jsxs("div",{className:"-mt-6 mb-2 flex flex-wrap items-center justify-center gap-3",children:[u.jsx(me,{type:"submit",className:"button-search",label:"Search"}),u.jsx(me,{type:"button",className:"button-search",onClick:p,label:"Reset"})]})]})})};Ds.propTypes={cars:g.array.isRequired};export{cs as C,Ds as F,Me as T,us as a,os as b,ns as c,Es as s,yt as u};
