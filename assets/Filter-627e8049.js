import{k as ve,l as Bt,m as Pt,r as oe,P as g,j as c,n as It,o as $t,B as me,p as Ht,q as Wt,t as zt,v as Gt,T as ut,w as Te,x as Kt,y as Jt,i as Qt,u as dt,z as Xt,A as Yt,D as Zt,E as es,R as D,F as ts,G as ss,s as rs,H as is}from"./index-356d933a.js";function ft(e=ve){const i=e===ve?Bt:Pt(e);return function(){const{store:s}=i();return s}}const as=ft();function ns(e=ve){const i=e===ve?as:ft(e);return function(){return i().dispatch}}const yt=ns(),ht="/rent-cars-react/assets/car-8d70796c.jpg",ls=(e,i)=>{const[t,s]=oe.useState([]);return oe.useEffect(()=>{if(!i)return;const a=[...new Set(e.map(l=>l[i]))];s(a)},[e,i]),t},Me=({src:e,alt:i,className:t,blockClass:s,width:a,height:l})=>c.jsx("div",{className:s?`mb-[14px] max-w-full overflow-hidden rounded-[14px] ${s}`:"thumb mb-[14px] max-w-full overflow-hidden rounded-[14px]",children:c.jsx("img",{src:e?`${e}`:ht,alt:i,className:t?`block h-auto max-w-full object-cover object-center ${t}`:"block h-auto max-w-full  object-cover object-center",width:a,height:l,loading:"lazy"})});Me.propTypes={src:g.string.isRequired,alt:g.string.isRequired,className:g.string,blockClass:g.string,width:g.string.isRequired,height:g.string};const os=document.getElementById("modal"),mt=({onClose:e,children:i,isOpen:t})=>{oe.useEffect(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="visible"},[t]);const s=oe.useCallback(a=>{document.body.style.overflow="visible",It(a,e)},[e]);return oe.useEffect(()=>(document.body.addEventListener("keydown",s),()=>document.body.removeEventListener("keydown",s)),[s]),$t.createPortal(c.jsx("div",{className:"backdrop",onClick:s,children:c.jsxs("div",{className:"modal max-w-full dark:bg-slate-700",children:[c.jsx(me,{onClick:e,className:"close",type:"button",iconURL:"#icon-close",ariaLabel:"close icon"}),i]})}),os)};mt.propTypes={children:g.node.isRequired,onClose:g.func.isRequired,isOpen:g.bool};const ce=()=>c.jsx("span",{className:"vector dark:text-white/50",children:"|"}),ne=({conditionText:e,conditionValue:i})=>c.jsxs("li",{className:"modal-btn-cond dark:bg-slate-600",children:[c.jsx("p",{className:"cond dark:text-white/50",children:e}),i&&c.jsx("span",{className:"modal-accent-cond",children:i})]});ne.propTypes={conditionText:g.string.isRequired,conditionValue:g.string};const gt=({rentConditions:e,mile:i,price:t,title:s})=>c.jsxs("div",{className:"mb-[24px] ",children:[c.jsxs("p",{className:"modal-second-title dark:text-white",children:[s,":"]}),c.jsxs("ul",{className:"modal-cond-block gap-3",children:[c.jsx(ne,{conditionText:e[0],conditionValue:e[1]}),c.jsx(ne,{conditionText:e[2]}),c.jsx(ne,{conditionText:e[3]}),c.jsx(ne,{conditionText:"Mileage: ",conditionValue:i}),c.jsx(ne,{conditionText:"Price: ",conditionValue:`${t}$`})]})]});gt.propTypes={rentConditions:g.array.isRequired,mile:g.string.isRequired,price:g.string.isRequired,title:g.string.isRequired};const Le=({items:e,separator:i})=>c.jsx("ul",{className:"mb-[4px] flex flex-wrap items-center justify-start",children:e.map((t,s)=>c.jsxs("li",{className:"text-description dark:text-white/50",children:[t,s<e.length-1&&i]},s))});Le.propTypes={items:g.array.isRequired,separator:g.any};const xt=({accessories:e,functionalities:i,title:t})=>c.jsxs("div",{className:"mb-[24px]",children:[c.jsxs("p",{className:"modal-second-title dark:text-white",children:[t,":"]}),c.jsx(Le,{items:e,separator:c.jsx(ce,{})}),c.jsx(Le,{items:i,separator:c.jsx(ce,{})})]});xt.propTypes={accessories:g.array.isRequired,functionalities:g.array.isRequired,title:g.string.isRequired};const pt=({car:e})=>{const{year:i,make:t,model:s,img:a,rentalPrice:l,address:d,description:v,accessories:p,functionalities:F,rentalConditions:j,mileage:x}=e,b=Kt(e),L=Ht(d,e),k=Wt(j),O=zt(x),B=Gt(l);return c.jsxs(c.Fragment,{children:[c.jsx(Me,{width:"461",height:"248",src:a,alt:`${t} ${s}`,className:"modal-car",blockClass:"w-[461px] h-[248px]",loading:"lazy"}),c.jsxs(ut,{className:"modal-title",children:[t," ",c.jsx("span",{className:"modal-accent-title",children:s}),", ",i]}),c.jsxs("div",{className:"mb-[14px] gap-[4px]",children:[c.jsx("ul",{className:"modal-description mb-[4px] flex items-center justify-start",children:Te(L,c.jsx(ce,{}))}),c.jsx("ul",{className:"modal-description flex items-center justify-start",children:Te(b,c.jsx(ce,{}))})]}),c.jsx("div",{className:"modal-accent-descr dark:text-white",children:v}),c.jsx(xt,{title:"Accessories and functionalities",accessories:p,functionalities:F}),c.jsx(gt,{title:"Rental Conditions",rentConditions:k,mile:O,price:B}),c.jsx("a",{href:"tel:+380730000000",className:"modal-btn-link",children:"Rental car"})]})};pt.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired,accessories:g.array.isRequired,rentalConditions:g.string.isRequired}).isRequired};const Ts=e=>e.cars.items,cs=e=>e.cars.favorites,us=e=>e.cars.filter,bt=({locationData:e,carData:i})=>c.jsxs(c.Fragment,{children:[c.jsx("ul",{className:"card-info-block flex-wrap dark:text-white/50",children:Te(e,c.jsx(ce,{}))}),c.jsx("ul",{className:"card-info-block mb-[28px] dark:text-white/50",children:Object.entries(i).map(([t,s],a,l)=>c.jsxs("li",{className:"text-description dark:text-white/50",children:[Jt(t,s),a<l.length-1&&c.jsx(ce,{})]},a))})]});bt.propTypes={carData:g.object.isRequired,locationData:g.array.isRequired};const ds=({car:e})=>{const{isOpen:i,open:t,close:s}=Qt(!1),a=dt(cs),l=yt(),{id:d,year:v,make:p,model:F,img:j,rentalPrice:x,address:b}=e,L=Yt(e),k=Xt(b,e),O=a==null?void 0:a.some(ue=>ue.id===d),B=()=>l(O?Zt(e):es(e));return c.jsx(c.Fragment,{children:c.jsxs("li",{className:"card flex-auto",children:[c.jsx(me,{type:"button",iconURL:"#icon-heart",ariaLabel:"heart icon",onClick:B,className:`heart ${O?"favorite":""}`}),c.jsx(Me,{className:"card-image",src:j||ht,alt:`${p} ${F}`,width:"274",height:"426",loading:"lazy"}),c.jsxs(ut,{children:[c.jsxs("span",{className:"truncate hover:text-clip dark:text-white",children:[p,c.jsx("span",{className:"title-accent ml-1",children:F}),", ",v]}),c.jsx("span",{className:"dark:text-white",children:x})]}),c.jsx(bt,{locationData:k,carData:L}),c.jsx(me,{label:"Learn more",className:"card-big-button",onClick:t}),i&&c.jsx(mt,{isOpen:i,onClose:s,children:c.jsx(pt,{car:e})})]})})};ds.propTypes={car:g.shape({id:g.number.isRequired,year:g.number.isRequired,make:g.string.isRequired,model:g.string.isRequired,type:g.string.isRequired,img:g.string.isRequired,description:g.string.isRequired,functionalities:g.array.isRequired,rentalPrice:g.string.isRequired,rentalCompany:g.string.isRequired,address:g.string.isRequired,mileage:g.number.isRequired}).isRequired,fav:g.bool};var ge=e=>e.type==="checkbox",le=e=>e instanceof Date,M=e=>e==null;const vt=e=>typeof e=="object";var q=e=>!M(e)&&!Array.isArray(e)&&vt(e)&&!le(e),_t=e=>q(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,fs=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Vt=(e,i)=>e.has(fs(i)),ys=e=>{const i=e.constructor&&e.constructor.prototype;return q(i)&&i.hasOwnProperty("isPrototypeOf")},Ue=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function H(e){let i;const t=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Ue&&(e instanceof Blob||e instanceof FileList))&&(t||q(e)))if(i=t?[]:{},!t&&!ys(e))i=e;else for(const s in e)e.hasOwnProperty(s)&&(i[s]=H(e[s]));else return e;return i}var xe=e=>Array.isArray(e)?e.filter(Boolean):[],C=e=>e===void 0,y=(e,i,t)=>{if(!i||!q(e))return t;const s=xe(i.split(/[,[\].]+?/)).reduce((a,l)=>M(a)?a:a[l],e);return C(s)||s===e?C(e[i])?t:e[i]:s};const _e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},X={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},hs=D.createContext(null),Be=()=>D.useContext(hs);var jt=(e,i,t,s=!0)=>{const a={defaultValues:i._defaultValues};for(const l in e)Object.defineProperty(a,l,{get:()=>{const d=l;return i._proxyFormState[d]!==W.all&&(i._proxyFormState[d]=!s||W.all),t&&(t[d]=!0),e[d]}});return a},I=e=>q(e)&&!Object.keys(e).length,Ft=(e,i,t,s)=>{t(e);const{name:a,...l}=e;return I(l)||Object.keys(l).length>=Object.keys(i).length||Object.keys(l).find(d=>i[d]===(!s||W.all))},pe=e=>Array.isArray(e)?e:[e],wt=(e,i,t)=>t&&i?e===i||Array.isArray(e)&&e.some(s=>s&&t&&s===i):!e||!i||e===i||pe(e).some(s=>s&&(s.startsWith(i)||i.startsWith(s)));function Pe(e){const i=D.useRef(e);i.current=e,D.useEffect(()=>{const t=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function ms(e){const i=Be(),{control:t=i.control,disabled:s,name:a,exact:l}=e||{},[d,v]=D.useState(t._formState),p=D.useRef(!0),F=D.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),j=D.useRef(a);return j.current=a,Pe({disabled:s,next:x=>p.current&&wt(j.current,x.name,l)&&Ft(x,F.current,t._updateFormState)&&v({...t._formState,...x}),subject:t._subjects.state}),D.useEffect(()=>(p.current=!0,F.current.isValid&&t._updateValid(!0),()=>{p.current=!1}),[t]),jt(d,t,F.current,!1)}var K=e=>typeof e=="string",kt=(e,i,t,s,a)=>K(e)?(s&&i.watch.add(e),y(t,e,a)):Array.isArray(e)?e.map(l=>(s&&i.watch.add(l),y(t,l))):(s&&(i.watchAll=!0),t);function gs(e){const i=Be(),{control:t=i.control,name:s,defaultValue:a,disabled:l,exact:d}=e||{},v=D.useRef(s);v.current=s,Pe({disabled:l,subject:t._subjects.values,next:j=>{wt(v.current,j.name,d)&&F(H(kt(v.current,t._names,j.values||t._formValues,!1,a)))}});const[p,F]=D.useState(t._getWatch(s,a));return D.useEffect(()=>t._removeUnmounted()),p}var Ie=e=>/^\w*$/.test(e),Rt=e=>xe(e.replace(/["|']|\]/g,"").split(/\.|\[/));function R(e,i,t){let s=-1;const a=Ie(i)?[i]:Rt(i),l=a.length,d=l-1;for(;++s<l;){const v=a[s];let p=t;if(s!==d){const F=e[v];p=q(F)||Array.isArray(F)?F:isNaN(+a[s+1])?{}:[]}e[v]=p,e=e[v]}return e}function xs(e){const i=Be(),{name:t,disabled:s,control:a=i.control,shouldUnregister:l}=e,d=Vt(a._names.array,t),v=gs({control:a,name:t,defaultValue:y(a._formValues,t,y(a._defaultValues,t,e.defaultValue)),exact:!0}),p=ms({control:a,name:t}),F=D.useRef(a.register(t,{...e.rules,value:v}));return F.current=a.register(t,e.rules),D.useEffect(()=>{const j=a._options.shouldUnregister||l,x=(b,L)=>{const k=y(a._fields,b);k&&(k._f.mount=L)};if(x(t,!0),j){const b=H(y(a._options.defaultValues,t));R(a._defaultValues,t,b),C(y(a._formValues,t))&&R(a._formValues,t,b)}return()=>{(d?j&&!a._state.action:j)?a.unregister(t):x(t,!1)}},[t,a,d,l]),D.useEffect(()=>{a._updateDisabledField({disabled:s,fields:a._fields,name:t})},[s,t,a]),{field:{name:t,value:v,disabled:s,onChange:D.useCallback(j=>F.current.onChange({target:{value:_t(j),name:t},type:_e.CHANGE}),[t]),onBlur:D.useCallback(()=>F.current.onBlur({target:{value:y(a._formValues,t),name:t},type:_e.BLUR}),[t,a]),ref:j=>{const x=y(a._fields,t);x&&j&&(x._f.ref={focus:()=>j.focus(),select:()=>j.select(),setCustomValidity:b=>j.setCustomValidity(b),reportValidity:()=>j.reportValidity()})}},formState:p,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(p.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(p.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(p.touchedFields,t)},error:{enumerable:!0,get:()=>y(p.errors,t)}})}}const tt=e=>e.render(xs(e));var ps=(e,i,t,s,a)=>i?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[s]:a||!0}}:{};const Oe=(e,i,t)=>{for(const s of t||Object.keys(e)){const a=y(e,s);if(a){const{_f:l,...d}=a;if(l&&i(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else q(d)&&Oe(d,i)}}};var st=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched}),rt=(e,i,t)=>!t&&(i.watchAll||i.watch.has(e)||[...i.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length)))),bs=(e,i,t)=>{const s=xe(y(e,t));return R(s,"root",i[t]),R(e,t,s),e},te=e=>typeof e=="boolean",$e=e=>e.type==="file",Y=e=>typeof e=="function",Ve=e=>{if(!Ue)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},be=e=>K(e),He=e=>e.type==="radio",je=e=>e instanceof RegExp;const it={value:!1,isValid:!1},at={value:!0,isValid:!0};var At=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!C(e[0].attributes.value)?C(e[0].value)||e[0].value===""?at:{value:e[0].value,isValid:!0}:at:it}return it};const nt={isValid:!1,value:null};var Dt=e=>Array.isArray(e)?e.reduce((i,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:i,nt):nt;function lt(e,i,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||te(e)&&!e)return{type:t,message:be(e)?e:"",ref:i}}var ae=e=>q(e)&&!je(e)?e:{value:e,message:""},ot=async(e,i,t,s,a)=>{const{ref:l,refs:d,required:v,maxLength:p,minLength:F,min:j,max:x,pattern:b,validate:L,name:k,valueAsNumber:O,mount:B,disabled:ue}=e._f,_=y(i,k);if(!B||ue)return{};const $=d?d[0]:l,J=w=>{s&&$.reportValidity&&($.setCustomValidity(te(w)?"":w||""),$.reportValidity())},E={},de=He(l),re=ge(l),ke=de||re,z=(O||$e(l))&&C(l.value)&&C(_)||Ve(l)&&l.value===""||_===""||Array.isArray(_)&&!_.length,Z=ps.bind(null,k,t,E),Q=(w,V,N,U=X.maxLength,P=X.minLength)=>{const G=w?V:N;E[k]={type:w?U:P,message:G,ref:l,...Z(w?U:P,G)}};if(a?!Array.isArray(_)||!_.length:v&&(!ke&&(z||M(_))||te(_)&&!_||re&&!At(d).isValid||de&&!Dt(d).isValid)){const{value:w,message:V}=be(v)?{value:!!v,message:v}:ae(v);if(w&&(E[k]={type:X.required,message:V,ref:$,...Z(X.required,V)},!t))return J(V),E}if(!z&&(!M(j)||!M(x))){let w,V;const N=ae(x),U=ae(j);if(!M(_)&&!isNaN(_)){const P=l.valueAsNumber||_&&+_;M(N.value)||(w=P>N.value),M(U.value)||(V=P<U.value)}else{const P=l.valueAsDate||new Date(_),G=ye=>new Date(new Date().toDateString()+" "+ye),ee=l.type=="time",fe=l.type=="week";K(N.value)&&_&&(w=ee?G(_)>G(N.value):fe?_>N.value:P>new Date(N.value)),K(U.value)&&_&&(V=ee?G(_)<G(U.value):fe?_<U.value:P<new Date(U.value))}if((w||V)&&(Q(!!w,N.message,U.message,X.max,X.min),!t))return J(E[k].message),E}if((p||F)&&!z&&(K(_)||a&&Array.isArray(_))){const w=ae(p),V=ae(F),N=!M(w.value)&&_.length>+w.value,U=!M(V.value)&&_.length<+V.value;if((N||U)&&(Q(N,w.message,V.message),!t))return J(E[k].message),E}if(b&&!z&&K(_)){const{value:w,message:V}=ae(b);if(je(w)&&!_.match(w)&&(E[k]={type:X.pattern,message:V,ref:l,...Z(X.pattern,V)},!t))return J(V),E}if(L){if(Y(L)){const w=await L(_,i),V=lt(w,$);if(V&&(E[k]={...V,...Z(X.validate,V.message)},!t))return J(V.message),E}else if(q(L)){let w={};for(const V in L){if(!I(w)&&!t)break;const N=lt(await L[V](_,i),$,V);N&&(w={...N,...Z(V,N.message)},J(N.message),t&&(E[k]=w))}if(!I(w)&&(E[k]={ref:$,...w},!t))return E}}return J(!0),E};function vs(e,i){const t=i.slice(0,-1).length;let s=0;for(;s<t;)e=C(e)?s++:e[i[s++]];return e}function _s(e){for(const i in e)if(e.hasOwnProperty(i)&&!C(e[i]))return!1;return!0}function T(e,i){const t=Array.isArray(i)?i:Ie(i)?[i]:Rt(i),s=t.length===1?e:vs(e,t),a=t.length-1,l=t[a];return s&&delete s[l],a!==0&&(q(s)&&I(s)||Array.isArray(s)&&_s(s))&&T(e,t.slice(0,-1)),e}function Se(){let e=[];return{get observers(){return e},next:a=>{for(const l of e)l.next&&l.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(l=>l!==a)}}),unsubscribe:()=>{e=[]}}}var Fe=e=>M(e)||!vt(e);function se(e,i){if(Fe(e)||Fe(i))return e===i;if(le(e)&&le(i))return e.getTime()===i.getTime();const t=Object.keys(e),s=Object.keys(i);if(t.length!==s.length)return!1;for(const a of t){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const d=i[a];if(le(l)&&le(d)||q(l)&&q(d)||Array.isArray(l)&&Array.isArray(d)?!se(l,d):l!==d)return!1}}return!0}var Nt=e=>e.type==="select-multiple",Vs=e=>He(e)||ge(e),Ce=e=>Ve(e)&&e.isConnected,St=e=>{for(const i in e)if(Y(e[i]))return!0;return!1};function we(e,i={}){const t=Array.isArray(e);if(q(e)||t)for(const s in e)Array.isArray(e[s])||q(e[s])&&!St(e[s])?(i[s]=Array.isArray(e[s])?[]:{},we(e[s],i[s])):M(e[s])||(i[s]=!0);return i}function Ct(e,i,t){const s=Array.isArray(e);if(q(e)||s)for(const a in e)Array.isArray(e[a])||q(e[a])&&!St(e[a])?C(i)||Fe(t[a])?t[a]=Array.isArray(e[a])?we(e[a],[]):{...we(e[a])}:Ct(e[a],M(i)?{}:i[a],t[a]):t[a]=!se(e[a],i[a]);return t}var qe=(e,i)=>Ct(e,i,we(i)),qt=(e,{valueAsNumber:i,valueAsDate:t,setValueAs:s})=>C(e)?e:i?e===""?NaN:e&&+e:t&&K(e)?new Date(e):s?s(e):e;function Ee(e){const i=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):i.disabled))return $e(i)?i.files:He(i)?Dt(e.refs).value:Nt(i)?[...i.selectedOptions].map(({value:t})=>t):ge(i)?At(e.refs).value:qt(C(i.value)?e.ref.value:i.value,e)}var js=(e,i,t,s)=>{const a={};for(const l of e){const d=y(i,l);d&&R(a,l,d._f)}return{criteriaMode:t,names:[...e],fields:a,shouldUseNativeValidation:s}},he=e=>C(e)?e:je(e)?e.source:q(e)?je(e.value)?e.value.source:e.value:e,Fs=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ct(e,i,t){const s=y(e,t);if(s||Ie(t))return{error:s,name:t};const a=t.split(".");for(;a.length;){const l=a.join("."),d=y(i,l),v=y(e,l);if(d&&!Array.isArray(d)&&t!==l)return{name:t};if(v&&v.type)return{name:l,error:v};a.pop()}return{name:t}}var ws=(e,i,t,s,a)=>a.isOnAll?!1:!t&&a.isOnTouch?!(i||e):(t?s.isOnBlur:a.isOnBlur)?!e:(t?s.isOnChange:a.isOnChange)?e:!0,ks=(e,i)=>!xe(y(e,i)).length&&T(e,i);const Rs={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function As(e={},i){let t={...Rs,...e},s={submitCount:0,isDirty:!1,isLoading:Y(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},a={},l=q(t.defaultValues)||q(t.values)?H(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:H(l),v={action:!1,mount:!1,watch:!1},p={mount:new Set,unMount:new Set,array:new Set,watch:new Set},F,j=0;const x={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:Se(),array:Se(),state:Se()},L=e.resetOptions&&e.resetOptions.keepDirtyValues,k=st(t.mode),O=st(t.reValidateMode),B=t.criteriaMode===W.all,ue=r=>n=>{clearTimeout(j),j=setTimeout(r,n)},_=async r=>{if(x.isValid||r){const n=t.resolver?I((await z()).errors):await Q(a,!0);n!==s.isValid&&b.state.next({isValid:n})}},$=r=>x.isValidating&&b.state.next({isValidating:r}),J=(r,n=[],o,h,f=!0,u=!0)=>{if(h&&o){if(v.action=!0,u&&Array.isArray(y(a,r))){const m=o(y(a,r),h.argA,h.argB);f&&R(a,r,m)}if(u&&Array.isArray(y(s.errors,r))){const m=o(y(s.errors,r),h.argA,h.argB);f&&R(s.errors,r,m),ks(s.errors,r)}if(x.touchedFields&&u&&Array.isArray(y(s.touchedFields,r))){const m=o(y(s.touchedFields,r),h.argA,h.argB);f&&R(s.touchedFields,r,m)}x.dirtyFields&&(s.dirtyFields=qe(l,d)),b.state.next({name:r,isDirty:V(r,n),dirtyFields:s.dirtyFields,errors:s.errors,isValid:s.isValid})}else R(d,r,n)},E=(r,n)=>{R(s.errors,r,n),b.state.next({errors:s.errors})},de=(r,n,o,h)=>{const f=y(a,r);if(f){const u=y(d,r,C(o)?y(l,r):o);C(u)||h&&h.defaultChecked||n?R(d,r,n?u:Ee(f._f)):P(r,u),v.mount&&_()}},re=(r,n,o,h,f)=>{let u=!1,m=!1;const A={name:r};if(!o||h){x.isDirty&&(m=s.isDirty,s.isDirty=A.isDirty=V(),u=m!==A.isDirty);const S=se(y(l,r),n);m=y(s.dirtyFields,r),S?T(s.dirtyFields,r):R(s.dirtyFields,r,!0),A.dirtyFields=s.dirtyFields,u=u||x.dirtyFields&&m!==!S}if(o){const S=y(s.touchedFields,r);S||(R(s.touchedFields,r,o),A.touchedFields=s.touchedFields,u=u||x.touchedFields&&S!==o)}return u&&f&&b.state.next(A),u?A:{}},ke=(r,n,o,h)=>{const f=y(s.errors,r),u=x.isValid&&te(n)&&s.isValid!==n;if(e.delayError&&o?(F=ue(()=>E(r,o)),F(e.delayError)):(clearTimeout(j),F=null,o?R(s.errors,r,o):T(s.errors,r)),(o?!se(f,o):f)||!I(h)||u){const m={...h,...u&&te(n)?{isValid:n}:{},errors:s.errors,name:r};s={...s,...m},b.state.next(m)}$(!1)},z=async r=>t.resolver(d,t.context,js(r||p.mount,a,t.criteriaMode,t.shouldUseNativeValidation)),Z=async r=>{const{errors:n}=await z(r);if(r)for(const o of r){const h=y(n,o);h?R(s.errors,o,h):T(s.errors,o)}else s.errors=n;return n},Q=async(r,n,o={valid:!0})=>{for(const h in r){const f=r[h];if(f){const{_f:u,...m}=f;if(u){const A=p.array.has(u.name),S=await ot(f,d,B,t.shouldUseNativeValidation&&!n,A);if(S[u.name]&&(o.valid=!1,n))break;!n&&(y(S,u.name)?A?bs(s.errors,S,u.name):R(s.errors,u.name,S[u.name]):T(s.errors,u.name))}m&&await Q(m,n,o)}}return o.valid},w=()=>{for(const r of p.unMount){const n=y(a,r);n&&(n._f.refs?n._f.refs.every(o=>!Ce(o)):!Ce(n._f.ref))&&Re(r)}p.unMount=new Set},V=(r,n)=>(r&&n&&R(d,r,n),!se(We(),l)),N=(r,n,o)=>kt(r,p,{...v.mount?d:C(n)?l:K(r)?{[r]:n}:n},o,n),U=r=>xe(y(v.mount?d:l,r,e.shouldUnregister?y(l,r,[]):[])),P=(r,n,o={})=>{const h=y(a,r);let f=n;if(h){const u=h._f;u&&(!u.disabled&&R(d,r,qt(n,u)),f=Ve(u.ref)&&M(n)?"":n,Nt(u.ref)?[...u.ref.options].forEach(m=>m.selected=f.includes(m.value)):u.refs?ge(u.ref)?u.refs.length>1?u.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(f)?!!f.find(A=>A===m.value):f===m.value)):u.refs[0]&&(u.refs[0].checked=!!f):u.refs.forEach(m=>m.checked=m.value===f):$e(u.ref)?u.ref.value="":(u.ref.value=f,u.ref.type||b.values.next({name:r,values:{...d}})))}(o.shouldDirty||o.shouldTouch)&&re(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&ye(r)},G=(r,n,o)=>{for(const h in n){const f=n[h],u=`${r}.${h}`,m=y(a,u);(p.array.has(r)||!Fe(f)||m&&!m._f)&&!le(f)?G(u,f,o):P(u,f,o)}},ee=(r,n,o={})=>{const h=y(a,r),f=p.array.has(r),u=H(n);R(d,r,u),f?(b.array.next({name:r,values:{...d}}),(x.isDirty||x.dirtyFields)&&o.shouldDirty&&b.state.next({name:r,dirtyFields:qe(l,d),isDirty:V(r,u)})):h&&!h._f&&!M(u)?G(r,u,o):P(r,u,o),rt(r,p)&&b.state.next({...s}),b.values.next({name:r,values:{...d}}),!v.mount&&i()},fe=async r=>{const n=r.target;let o=n.name,h=!0;const f=y(a,o),u=()=>n.type?Ee(f._f):_t(r);if(f){let m,A;const S=u(),ie=r.type===_e.BLUR||r.type===_e.FOCUS_OUT,Ot=!Fs(f._f)&&!t.resolver&&!y(s.errors,o)&&!f._f.deps||ws(ie,y(s.touchedFields,o),s.isSubmitted,O,k),De=rt(o,p,ie);R(d,o,S),ie?(f._f.onBlur&&f._f.onBlur(r),F&&F(0)):f._f.onChange&&f._f.onChange(r);const Ne=re(o,S,ie,!1),Mt=!I(Ne)||De;if(!ie&&b.values.next({name:o,type:r.type,values:{...d}}),Ot)return x.isValid&&_(),Mt&&b.state.next({name:o,...De?{}:Ne});if(!ie&&De&&b.state.next({...s}),$(!0),t.resolver){const{errors:Ze}=await z([o]),Ut=ct(s.errors,a,o),et=ct(Ze,a,Ut.name||o);m=et.error,o=et.name,A=I(Ze)}else m=(await ot(f,d,B,t.shouldUseNativeValidation))[o],h=isNaN(S)||S===y(d,o,S),h&&(m?A=!1:x.isValid&&(A=await Q(a,!0)));h&&(f._f.deps&&ye(f._f.deps),ke(o,A,m,Ne))}},ye=async(r,n={})=>{let o,h;const f=pe(r);if($(!0),t.resolver){const u=await Z(C(r)?r:f);o=I(u),h=r?!f.some(m=>y(u,m)):o}else r?(h=(await Promise.all(f.map(async u=>{const m=y(a,u);return await Q(m&&m._f?{[u]:m}:m)}))).every(Boolean),!(!h&&!s.isValid)&&_()):h=o=await Q(a);return b.state.next({...!K(r)||x.isValid&&o!==s.isValid?{}:{name:r},...t.resolver||!r?{isValid:o}:{},errors:s.errors,isValidating:!1}),n.shouldFocus&&!h&&Oe(a,u=>u&&y(s.errors,u),r?f:p.mount),h},We=r=>{const n={...l,...v.mount?d:{}};return C(r)?n:K(r)?y(n,r):r.map(o=>y(n,o))},ze=(r,n)=>({invalid:!!y((n||s).errors,r),isDirty:!!y((n||s).dirtyFields,r),isTouched:!!y((n||s).touchedFields,r),error:y((n||s).errors,r)}),Et=r=>{r&&pe(r).forEach(n=>T(s.errors,n)),b.state.next({errors:r?s.errors:{}})},Ge=(r,n,o)=>{const h=(y(a,r,{_f:{}})._f||{}).ref;R(s.errors,r,{...n,ref:h}),b.state.next({name:r,errors:s.errors,isValid:!1}),o&&o.shouldFocus&&h&&h.focus&&h.focus()},Tt=(r,n)=>Y(r)?b.values.subscribe({next:o=>r(N(void 0,n),o)}):N(r,n,!0),Re=(r,n={})=>{for(const o of r?pe(r):p.mount)p.mount.delete(o),p.array.delete(o),n.keepValue||(T(a,o),T(d,o)),!n.keepError&&T(s.errors,o),!n.keepDirty&&T(s.dirtyFields,o),!n.keepTouched&&T(s.touchedFields,o),!t.shouldUnregister&&!n.keepDefaultValue&&T(l,o);b.values.next({values:{...d}}),b.state.next({...s,...n.keepDirty?{isDirty:V()}:{}}),!n.keepIsValid&&_()},Ke=({disabled:r,name:n,field:o,fields:h})=>{if(te(r)){const f=r?void 0:y(d,n,Ee(o?o._f:y(h,n)._f));R(d,n,f),re(n,f,!1,!1,!0)}},Ae=(r,n={})=>{let o=y(a,r);const h=te(n.disabled);return R(a,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...n}}),p.mount.add(r),o?Ke({field:o,disabled:n.disabled,name:r}):de(r,!0,n.value),{...h?{disabled:n.disabled}:{},...t.progressive?{required:!!n.required,min:he(n.min),max:he(n.max),minLength:he(n.minLength),maxLength:he(n.maxLength),pattern:he(n.pattern)}:{},name:r,onChange:fe,onBlur:fe,ref:f=>{if(f){Ae(r,n),o=y(a,r);const u=C(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=Vs(u),A=o._f.refs||[];if(m?A.find(S=>S===u):u===o._f.ref)return;R(a,r,{_f:{...o._f,...m?{refs:[...A.filter(Ce),u,...Array.isArray(y(l,r))?[{}]:[]],ref:{type:u.type,name:r}}:{ref:u}}}),de(r,!1,void 0,u)}else o=y(a,r,{}),o._f&&(o._f.mount=!1),(t.shouldUnregister||n.shouldUnregister)&&!(Vt(p.array,r)&&v.action)&&p.unMount.add(r)}}},Je=()=>t.shouldFocusError&&Oe(a,r=>r&&y(s.errors,r),p.mount),Qe=(r,n)=>async o=>{o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let h=H(d);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:f,values:u}=await z();s.errors=f,h=u}else await Q(a);T(s.errors,"root"),I(s.errors)?(b.state.next({errors:{}}),await r(h,o)):(n&&await n({...s.errors},o),Je(),setTimeout(Je)),b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(s.errors),submitCount:s.submitCount+1,errors:s.errors})},Lt=(r,n={})=>{y(a,r)&&(C(n.defaultValue)?ee(r,y(l,r)):(ee(r,n.defaultValue),R(l,r,n.defaultValue)),n.keepTouched||T(s.touchedFields,r),n.keepDirty||(T(s.dirtyFields,r),s.isDirty=n.defaultValue?V(r,y(l,r)):V()),n.keepError||(T(s.errors,r),x.isValid&&_()),b.state.next({...s}))},Xe=(r,n={})=>{const o=r?H(r):l,h=H(o),f=r&&!I(r)?h:l;if(n.keepDefaultValues||(l=o),!n.keepValues){if(n.keepDirtyValues||L)for(const u of p.mount)y(s.dirtyFields,u)?R(f,u,y(d,u)):ee(u,y(f,u));else{if(Ue&&C(r))for(const u of p.mount){const m=y(a,u);if(m&&m._f){const A=Array.isArray(m._f.refs)?m._f.refs[0]:m._f.ref;if(Ve(A)){const S=A.closest("form");if(S){S.reset();break}}}}a={}}d=e.shouldUnregister?n.keepDefaultValues?H(l):{}:H(f),b.array.next({values:{...f}}),b.values.next({values:{...f}})}p={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!v.mount&&i(),v.mount=!x.isValid||!!n.keepIsValid,v.watch=!!e.shouldUnregister,b.state.next({submitCount:n.keepSubmitCount?s.submitCount:0,isDirty:n.keepDirty?s.isDirty:!!(n.keepDefaultValues&&!se(r,l)),isSubmitted:n.keepIsSubmitted?s.isSubmitted:!1,dirtyFields:n.keepDirtyValues?s.dirtyFields:n.keepDefaultValues&&r?qe(l,r):{},touchedFields:n.keepTouched?s.touchedFields:{},errors:n.keepErrors?s.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Ye=(r,n)=>Xe(Y(r)?r(d):r,n);return{control:{register:Ae,unregister:Re,getFieldState:ze,handleSubmit:Qe,setError:Ge,_executeSchema:z,_getWatch:N,_getDirty:V,_updateValid:_,_removeUnmounted:w,_updateFieldArray:J,_updateDisabledField:Ke,_getFieldArray:U,_reset:Xe,_resetDefaultValues:()=>Y(t.defaultValues)&&t.defaultValues().then(r=>{Ye(r,t.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:r=>{s={...s,...r}},_subjects:b,_proxyFormState:x,get _fields(){return a},get _formValues(){return d},get _state(){return v},set _state(r){v=r},get _defaultValues(){return l},get _names(){return p},set _names(r){p=r},get _formState(){return s},set _formState(r){s=r},get _options(){return t},set _options(r){t={...t,...r}}},trigger:ye,register:Ae,handleSubmit:Qe,watch:Tt,setValue:ee,getValues:We,reset:Ye,resetField:Lt,clearErrors:Et,unregister:Re,setError:Ge,setFocus:(r,n={})=>{const o=y(a,r),h=o&&o._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),n.shouldSelect&&f.select())}},getFieldState:ze}}function Ds(e={}){const i=D.useRef(),t=D.useRef(),[s,a]=D.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...As(e,()=>a(d=>({...d}))),formState:s});const l=i.current.control;return l._options=e,Pe({subject:l._subjects.state,next:d=>{Ft(d,l._proxyFormState,l._updateFormState,!0)&&a({...l._formState})}}),D.useEffect(()=>{e.values&&!se(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values):l._resetDefaultValues()},[e.values,l]),D.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),i.current.formState=jt(s,l),i.current}const Ns=({cars:e})=>{const i=dt(us),t=yt(),{pathname:s}=ts(),a=s==="/favorites"&&(e==null?void 0:e.length)===0,l=ss(e),d=ls(e,"make"),{register:v,handleSubmit:p,control:F,reset:j,formState:{errors:x}}=Ds({mode:"onChange",shouldDisable:a});oe.useEffect(()=>{j(i)},[i,j]);const b=k=>{t(rs(k))},L=()=>{t(is()),j({brand:"",price:"",from:"",to:""})};return c.jsx("form",{onSubmit:p(b),className:`form flex-wrap px-3 ${a?"pointer-events-none opacity-60":""}`,disabled:a,children:c.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[c.jsxs("div",{className:"form mb-2 flex-wrap items-center gap-3",children:[c.jsxs("div",{className:"select-wrapper mb-2",children:[c.jsx("label",{htmlFor:"brand",className:"select-label",children:"Car brand"}),c.jsx(tt,{name:"brand",control:F,rules:{required:!0,message:"Brand is required"},render:({field:k})=>c.jsxs(c.Fragment,{children:[c.jsxs("select",{...k,className:"select-brand",children:[c.jsx("option",{value:"",className:"select-placeholder",children:"Enter the text"}),d&&d.map((O,B)=>c.jsx("option",{value:O,className:"select-text",children:O},B))]}),x.brand&&c.jsx("p",{className:`error ${a?"opacity-0":"opacity-100"}`,children:x.brand.type==="required"?"Brand is required":x.brand.message})]})})]}),c.jsxs("div",{className:"select-wrapper mb-2",children:[c.jsx("label",{htmlFor:"price",className:"select-label",children:"Price/ 1 hour"}),c.jsx("div",{children:c.jsx(tt,{name:"price",control:F,rules:{required:!0,min:{value:0,message:"Must be 0 or greater"}},render:({field:k})=>c.jsxs(c.Fragment,{children:[c.jsxs("select",{...k,className:"select-price",children:[c.jsx("option",{value:"",className:"select-placeholder",children:"To $"}),l&&l.map((O,B)=>c.jsx("option",{value:O,className:"select-text",children:O},B))]}),x.price&&c.jsx("p",{className:`error ${a?"opacity-0":"opacity-100"}`,children:x.price.type==="required"?"Price is required":x.price.message})]})})})]}),c.jsxs("div",{className:"mb-2 flex flex-col",children:[c.jsx("label",{htmlFor:"minMileage",className:"select-label",children:"Car mileage / km (from)"}),c.jsxs("div",{className:"relative flex after:absolute after:inset-y-0 after:right-1/2 after:h-[48px] after:w-[1px] after:bg-[rgba(138,138,137,0.2)] after:content-['']",children:[c.jsxs("label",{className:"relative",children:[c.jsx("input",{type:"number",className:"select-from relative m-auto select-text",...v("from",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"}})}),c.jsx("span",{className:"select-placeholder absolute left-3 top-1/2 -translate-y-1/2",children:"From"})]}),c.jsxs("label",{className:"relative",children:[c.jsx("input",{type:"number",className:"select-to select-text",...v("to",{required:"This field is required",min:{value:0,message:"Must be 0 or greater"},validate:(k,{from:O})=>parseInt(k)>parseInt(O)?!0:"To must be greater than From"})}),c.jsx("span",{className:"select-placeholder absolute left-3 top-1/2 -translate-y-1/2",children:"To"})]}),c.jsxs("p",{className:`error flex items-center justify-between gap-1 ${a?"opacity-0":"opacity-100"}`,children:[(x==null?void 0:x.from)&&c.jsx("span",{children:x.from.message}),(x==null?void 0:x.to)&&c.jsx("span",{children:x.to.message})]})]})]})]}),c.jsxs("div",{className:"-mt-6 mb-2 flex flex-wrap items-center justify-center gap-3",children:[c.jsx(me,{type:"submit",className:"button-search",label:"Search"}),c.jsx(me,{type:"button",className:"button-search",onClick:L,label:"Reset"})]})]})})};Ns.propTypes={cars:g.array.isRequired};export{ds as C,Ns as F,Me as T,us as a,cs as b,ls as c,Ts as s,yt as u};
